function _createForOfIteratorHelper(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=_unsupportedIterableToArray(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c,r,i=!0,o=!1;return{s:function(){c=e[Symbol.iterator]()},n:function(){var e=c.next();return i=e.done,e},e:function(e){o=!0,r=e},f:function(){try{i||null==c.return||c.return()}finally{if(o)throw r}}}}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,c=new Array(t);n<t;n++)c[n]=e[n];return c}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var c=t[n];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(e,c.key,c)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{X2qB:function(e,t,n){"use strict";n.r(t),n.d(t,"MainModule",(function(){return P}));var c,r,i=n("ofXK"),o=n("tyNb"),a=n("jtHE"),s=n("2Vo4"),l=n("fXoL"),u=n("q6HN"),b=n("AytR"),f=n("gFX4"),p=n("hrsj"),v=n("tk/3"),d=((c=function e(t,n,c){var r=this;_classCallCheck(this,e),this.tokenService=t,this.adminService=n,this.http=c,this.socket=null,this.socketObservable=new s.a(null),this.adminService.getAdmin().subscribe((function(e){console.log("admin for socket",e,t.token),e&&(r.socket=f.connect("".concat(b.a.backURL),{query:{token:t.token,worldName:"world1"}}),r.socketObservable.next(r.socket))}))}).\u0275fac=function(e){return new(e||c)(l.Wb(p.a),l.Wb(u.a),l.Wb(v.b))},c.\u0275prov=l.Ib({token:c,factory:c.\u0275fac,providedIn:"root"}),c),h=n("5RKK"),y=((r=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"transform",value:function(e){return"key"===e||"x"===e||"y"===e||"key_"===e||"id"===e?null:e}}]),e}()).\u0275fac=function(e){return new(e||r)},r.\u0275pipe=l.Lb({name:"keyFree",type:r,pure:!0}),r),m=["viewver"];function k(e,t){if(1&e){var n=l.Tb();l.Sb(0,"button",2),l.ac("click",(function(){l.pc(n);var e=t.$implicit;return l.cc(2).selectWorld(e)})),l.xc(1),l.Rb()}if(2&e){var c=t.$implicit;l.Cb(1),l.zc(" ",c.name," ")}}function w(e,t){if(1&e&&(l.Sb(0,"div"),l.vc(1,k,2,1,"button",1),l.Rb()),2&e){var n=t.$implicit;l.Cb(1),l.ic("ngForOf",n)}}function C(e,t){if(1&e&&(l.Sb(0,"div"),l.Nb(1,"br"),l.Sb(2,"p"),l.xc(3),l.Rb(),l.Sb(4,"p"),l.xc(5),l.Rb(),l.Sb(6,"p"),l.xc(7),l.Rb(),l.Rb()),2&e){var n=t.$implicit;l.Cb(3),l.zc("key: ",n.key_,""),l.Cb(2),l.zc("color : ",n.color,""),l.Cb(2),l.zc("img : ",n.img,"")}}function g(e,t){if(1&e){var n=l.Tb();l.Sb(0,"div"),l.Nb(1,"input",9,10),l.Sb(3,"button",2),l.ac("click",(function(){l.pc(n);var e=l.nc(2),t=l.cc().$implicit,c=l.cc().$implicit;return l.cc(3).sendUpdate(c,t.key,e.value)})),l.xc(4,"send update"),l.Rb(),l.Rb()}if(2&e){var c=l.cc().$implicit;l.Cb(1),l.ic("value",c.value)}}function S(e,t){if(1&e&&l.xc(0),2&e){var n=l.cc().$implicit;l.zc(" ",n.value,"")}}function x(e,t){if(1&e&&(l.Sb(0,"div"),l.Sb(1,"p"),l.xc(2),l.Rb(),l.vc(3,g,5,1,"div",7),l.dc(4,"keyFree"),l.vc(5,S,1,1,"ng-template",null,8,l.wc),l.Nb(7,"br"),l.Rb()),2&e){var n=t.$implicit,c=l.nc(6);l.Cb(2),l.zc("",n.key,":"),l.Cb(1),l.ic("ngIf",l.ec(4,3,n.key))("ngIfElse",c)}}function R(e,t){if(1&e&&(l.Sb(0,"div"),l.Sb(1,"h3"),l.xc(2),l.Rb(),l.vc(3,x,8,5,"div",3),l.dc(4,"keyvalue"),l.Rb()),2&e){var n=t.$implicit;l.Cb(2),l.zc("name: ",n.name,""),l.Cb(1),l.ic("ngForOf",l.ec(4,2,n))}}function _(e,t){if(1&e&&(l.Sb(0,"div"),l.xc(1," test "),l.vc(2,R,5,4,"div",3),l.Rb()),2&e){var n=t.$implicit;l.Cb(2),l.ic("ngForOf",n)}}function I(e,t){if(1&e){var n=l.Tb();l.Sb(0,"div"),l.Sb(1,"h3"),l.xc(2),l.Rb(),l.Sb(3,"p"),l.xc(4),l.Rb(),l.Sb(5,"p"),l.xc(6),l.Rb(),l.Sb(7,"p"),l.xc(8),l.dc(9,"json"),l.Rb(),l.Nb(10,"br"),l.Sb(11,"h3"),l.xc(12,"clans:"),l.Rb(),l.vc(13,C,8,3,"div",3),l.Nb(14,"br"),l.Sb(15,"div",4),l.Sb(16,"app-world-viewver",5,6),l.ac("moveRequest",(function(e){return l.pc(n),l.cc().move(e)}))("focusCase",(function(e){return l.pc(n),l.cc().focus(e)})),l.Rb(),l.Rb(),l.vc(18,_,3,1,"div",0),l.dc(19,"async"),l.Rb()}if(2&e){var c=t.$implicit,r=l.cc();l.Cb(2),l.yc(c.name),l.Cb(2),l.zc("width:",c.width,""),l.Cb(2),l.zc("height:",c.height,""),l.Cb(2),l.yc(l.ec(9,8,c)),l.Cb(5),l.ic("ngForOf",c.clans),l.Cb(3),l.ic("socket",r.socketService.socketObservable)("character",r.chara),l.Cb(2),l.ic("ngIf",l.ec(19,10,r.focusedCase))}}var O,A,F=((A=function(){function e(t,n){_classCallCheck(this,e),this.adminService=t,this.socketService=n,this.worlds=new a.a,this.world=new s.a(null),this.chara=new s.a({position:{x:0,y:0}}),this.focusedCase=new s.a(null)}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.worlds.subscribe((function(t){e.worldsActual=t})),this.adminService.getWorlds().subscribe((function(t){e.worlds.next(t),e.world.next(t[0]),e.chara.next({position:{x:0,y:0}}),console.log("admin worlds",t)}))}},{key:"move",value:function(e){console.log("move",e);var t=this.chara.getValue();t.position.x+=e.x,t.position.y+=e.y,this.chara.next(t)}},{key:"focus",value:function(e){console.log("focusing",e),this.focusedCase.next(e)}},{key:"selectWorld",value:function(e){var t,n=_createForOfIteratorHelper(this.worldsActual);try{for(n.s();!(t=n.n()).done;){var c=t.value;if(c.name===e){this.world.next(c);break}}}catch(r){n.e(r)}finally{n.f()}}},{key:"sendUpdate",value:function(e,t,n){var c=this;console.log("send update",this.world.getValue(),e,t,n),this.adminService.updateWorldValue(this.world.getValue().name,e,t,n,(function(e){console.log(c.viewver),console.log("res update",e),e&&c.viewver.updateObjs([e],(function(e){}))}))}}]),e}()).\u0275fac=function(e){return new(e||A)(l.Mb(u.a),l.Mb(d))},A.\u0275cmp=l.Gb({type:A,selectors:[["app-admin-world"]],viewQuery:function(e,t){var n;1&e&&l.Cc(m,!0),2&e&&l.mc(n=l.bc())&&(t.viewver=n.first)},decls:7,vars:6,consts:[[4,"ngIf"],[3,"click",4,"ngFor","ngForOf"],[3,"click"],[4,"ngFor","ngForOf"],[1,"map"],[3,"socket","character","moveRequest","focusCase"],["viewver",""],[4,"ngIf","ngIfElse"],["justShow",""],[3,"value"],["input",""]],template:function(e,t){1&e&&(l.Sb(0,"h2"),l.xc(1,"Admin Worlds"),l.Rb(),l.vc(2,w,2,1,"div",0),l.dc(3,"async"),l.vc(4,I,20,12,"div",0),l.dc(5,"async"),l.Nb(6,"router-outlet")),2&e&&(l.Cb(2),l.ic("ngIf",l.ec(3,2,t.worlds)),l.Cb(2),l.ic("ngIf",l.ec(5,4,t.world)))},directives:[i.n,o.e,i.m,h.a],pipes:[i.b,i.g,i.h,y],styles:[".map[_ngcontent-%COMP%]{width:512px;height:256px}"]}),A),$=((O=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"ngOnInit",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||O)},O.\u0275cmp=l.Gb({type:O,selectors:[["app-calculs"]],decls:2,vars:0,template:function(e,t){1&e&&(l.Sb(0,"p"),l.xc(1,"calculs works!"),l.Rb())},styles:[""]}),O);function j(e,t){1&e&&(l.Sb(0,"div"),l.xc(1," test\n"),l.Rb())}var L,z,N,T,W,M=((z=function(){function e(t){_classCallCheck(this,e),this.adminService=t,this.test=new s.a("bonjour")}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"logOut",value:function(){this.adminService.logOut()}}]),e}()).\u0275fac=function(e){return new(e||z)(l.Mb(u.a))},z.\u0275cmp=l.Gb({type:z,selectors:[["app-main"]],decls:13,vars:7,consts:[[3,"click"],[3,"routerLink"],[4,"ngIf"]],template:function(e,t){1&e&&(l.Sb(0,"button",0),l.ac("click",(function(){return t.logOut()})),l.xc(1,"logout"),l.Rb(),l.Sb(2,"button",1),l.xc(3,"users"),l.Rb(),l.Sb(4,"button",1),l.xc(5,"worlds"),l.Rb(),l.Sb(6,"button",1),l.xc(7,"patterns"),l.Rb(),l.Sb(8,"button",1),l.xc(9,"calculs"),l.Rb(),l.vc(10,j,2,0,"div",2),l.dc(11,"async"),l.Nb(12,"router-outlet")),2&e&&(l.Cb(2),l.ic("routerLink","users"),l.Cb(2),l.ic("routerLink","worlds"),l.Cb(2),l.ic("routerLink","patterns"),l.Cb(2),l.ic("routerLink","calculs"),l.Cb(2),l.ic("ngIf",l.ec(11,5,t.test)))},directives:[o.c,i.n,o.e],pipes:[i.b],styles:[""]}),z),q=((L=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"ngOnInit",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||L)},L.\u0275cmp=l.Gb({type:L,selectors:[["app-patterns"]],decls:2,vars:0,template:function(e,t){1&e&&(l.Sb(0,"p"),l.xc(1,"patterns works!"),l.Rb())},styles:[""]}),L),E=o.d.forChild([{path:"",component:M,children:[{path:"users",component:(N=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"ngOnInit",value:function(){}}]),e}(),N.\u0275fac=function(e){return new(e||N)},N.\u0275cmp=l.Gb({type:N,selectors:[["app-users"]],decls:2,vars:0,template:function(e,t){1&e&&(l.Sb(0,"p"),l.xc(1,"users works!"),l.Rb())},styles:[""]}),N)},{path:"patterns",component:q},{path:"calculs",component:$},{path:"worlds",component:F}]}]),G=n("ze14"),K=((W=function e(){_classCallCheck(this,e)}).\u0275mod=l.Kb({type:W}),W.\u0275inj=l.Jb({factory:function(e){return new(e||W)},imports:[[i.c]]}),W),P=((T=function e(){_classCallCheck(this,e)}).\u0275mod=l.Kb({type:T}),T.\u0275inj=l.Jb({factory:function(e){return new(e||T)},imports:[[i.c,E,G.a,K]]}),T)}}]);