(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{jkDv:function(t,e,n){"use strict";n.r(e),n.d(e,"AdminModule",(function(){return u}));var o=n("ofXK"),i=n("tyNb"),a=n("fXoL"),r=n("q6HN");let s=(()=>{class t{constructor(t,e){this.adminService=t,this.router=e,this.test="bonjour"}ngOnInit(){}connect(t,e){console.log("connect",t,e),this.adminService.login(t,e,t=>{t||alert("Vos identifiants ne sont pas correct.")})}}return t.\u0275fac=function(e){return new(e||t)(a.Mb(r.a),a.Mb(i.b))},t.\u0275cmp=a.Gb({type:t,selectors:[["app-admin"]],decls:8,vars:0,consts:[["type","text","placeholder","admin"],["admin",""],["type","password","placeholder","mot de passe"],["password",""],[3,"click"]],template:function(t,e){if(1&t){const t=a.Tb();a.Sb(0,"form"),a.Nb(1,"input",0,1),a.Nb(3,"input",2,3),a.Rb(),a.Sb(5,"button",4),a.ac("click",(function(){a.pc(t);const n=a.nc(2),o=a.nc(4);return e.connect(n.value,o.value)})),a.xc(6,"ok"),a.Rb(),a.Nb(7,"router-outlet")}},directives:[i.e],styles:[""]}),t})();var c=n("lJxs");let l=(()=>{class t{constructor(t,e){this.adminService=t,this.router=e}canActivate(t,e){return this.adminService.getAdmin().pipe(Object(c.a)(e=>(console.log("ACCOUNT READ IN ADMIN",e),e?(t.url[0].path=e.admin,!0):(this.router.navigate(["/admin/login"]),!0))))}}return t.\u0275fac=function(e){return new(e||t)(a.Wb(r.a),a.Wb(i.b))},t.\u0275prov=a.Ib({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const d=i.d.forChild([{path:"login",component:s,canActivate:[(()=>{class t{constructor(t,e){this.adminService=t,this.router=e}canActivate(t,e){return this.adminService.getAdmin().pipe(Object(c.a)(t=>(console.log("ACCOUNT READ IN ADMIN",t),!t||(this.router.navigate(["/admin/main"]),!0))))}}return t.\u0275fac=function(e){return new(e||t)(a.Wb(r.a),a.Wb(i.b))},t.\u0275prov=a.Ib({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()]},{path:":admin",canActivate:[l],loadChildren:()=>Promise.all([n.e(1),n.e(8)]).then(n.bind(null,"X2qB")).then(t=>t.MainModule)},{path:"**",redirectTo:"login",pathMatch:"full"}]);let u=(()=>{class t{}return t.\u0275mod=a.Kb({type:t}),t.\u0275inj=a.Jb({factory:function(e){return new(e||t)},imports:[[o.c,d]]}),t})()},q6HN:function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var o=n("jtHE"),i=n("AytR"),a=n("fXoL"),r=n("tk/3"),s=n("hrsj"),c=n("tyNb");let l=(()=>{class t{constructor(t,e,n){this.http=t,this.tokenService=e,this.router=n,this.admin=new o.a,this.actualAdmin=null,this.admin.subscribe(t=>{this.actualAdmin=t}),console.log("look for admin token",this.tokenService.getToken()),this.tokenService.getToken()?this.http.post(`${i.a.apiURL}/admin/readToken`,{token:this.tokenService.getToken()}).subscribe(t=>{console.log("adminRes",t),this.admin.next(t)}):this.admin.next(null)}login(t,e,n){this.http.post(`${i.a.apiURL}/admin/login`,{user:t,password:e}).subscribe(t=>{console.log(t),t&&t.token?(this.tokenService.setToken(t.token),this.router.navigate(["/admin/main"]),document.location.reload(),n(!0)):n(!1)},t=>{console.log(t),n(!1)})}logOut(){this.tokenService.removeToken(),localStorage.removeItem("token"),this.admin.next(null),this.router.navigate(["/admin/login"]),document.location.reload()}getAdmin(){return this.admin}getWorlds(){return this.http.get(`${i.a.apiURL}/admin/getWorlds`)}pass(t){this.http.get(`${i.a.apiURL}/admin/pass?world=${t}`).subscribe(t=>{console.log("pass done",t)})}updateWorldValue(t,e,n,o,a){console.log("update world value",o),this.http.post(`${i.a.apiURL}/admin/updateWorldValue`,{worldName:t,target:e,key:n,value:o}).subscribe(t=>{a(t)},t=>{console.log("err",t)})}updateConstantValue(t,e,n,o){console.log("update world constant",n),this.http.post(`${i.a.apiURL}/admin/updateWorldConstantValue`,{worldName:t,key:e,value:n}).subscribe(t=>{o(t)},t=>{console.log("err",t)})}}return t.\u0275fac=function(e){return new(e||t)(a.Wb(r.b),a.Wb(s.a),a.Wb(c.b))},t.\u0275prov=a.Ib({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()}}]);