(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{"we/n":function(e,t,n){"use strict";n.r(t),n.d(t,"ConnectionModule",(function(){return I}));var o=n("ofXK"),r=n("3Pt+"),i=n("tyNb"),a=n("Wp6s"),c=n("kmnG"),s=n("qFsG"),l=n("Olzg"),m=n("R0Ic"),u=n("fXoL"),p=n("r479"),d=n("XiUz"),b=n("znSr"),f=n("tk/3"),g=n("hztc"),h=n("bTqV");let w=(()=>{class e{transform(e,t){let n=null;return e&&("signIn"===t?e.backend?n="probl\xe8me technique":!0===e.emailNotExist?n="email non reconnu":!0===e.email&&(n="email invalid"):"create"===t&&(e.backend?n="probl\xe8me technique":!0===e.emailExist?n="email d\xe9j\xe0 pris":!0===e.email?n="email invalid":!0===e.nameExist?n="pseudo d\xe9j\xe0 pris":!0===e.require&&(n="champ requis"))),n}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=u.Lb({name:"inputMail",type:e,pure:!0}),e})();const v=["loginRef"];let C=(()=>{class e{constructor(e,t,n){this.http=e,this.accountService=t,this.router=n}ngOnInit(){this.formGroup=new r.d({email:new r.b("",[r.m.required,r.m.email],this.validateEmail.bind(this)),password:new r.b("",r.m.required)})}validateEmail(e){return new Promise((t,n)=>{this.accountService.checkEmail(e.value).subscribe(e=>{t(e?null:{emailNotExist:!0})},e=>{t({backend:!0})})})}login(){this.formGroup.valid&&this.accountService.signIn(this.formGroup.value).subscribe(e=>{console.log(e)},e=>{console.log(e),alert("mot de passe incorrect.")})}prepareLoginButton(){this.auth2.attachClickHandler(this.loginElement.nativeElement,{},e=>{let t=e.getBasicProfile();console.log("Token || "+e.getAuthResponse().id_token),console.log("ID: "+t.getId()),console.log("Name: "+t.getName()),console.log("Image URL: "+t.getImageUrl()),console.log("Email: "+t.getEmail())},e=>{})}googleSDK(){var e,t,n,o;window.googleSDKLoaded=()=>{window.gapi.load("auth2",()=>{this.auth2=window.gapi.auth2.init({client_id:"212493728126-dr3lerpm5vnbbhqnavjqdfucd1ddbtef.apps.googleusercontent.com",scope:"profile email"}),this.prepareLoginButton()})},t="google-jssdk",o=(e=document).getElementsByTagName("script")[0],e.getElementById(t)||((n=e.createElement("script")).id=t,n.src="https://apis.google.com/js/platform.js?onload=googleSDKLoaded",o.parentNode.insertBefore(n,o))}forgotPassword(){let e=prompt("entrez votre email");e&&this.accountService.resetPassword(e,e=>{e?alert("Merci. Un email de confirmation vous a \xe9t\xe9 envoy\xe9"):alert("cet email n'est pas valid")})}}return e.\u0275fac=function(t){return new(t||e)(u.Mb(f.b),u.Mb(g.a),u.Mb(i.b))},e.\u0275cmp=u.Gb({type:e,selectors:[["app-signin"]],viewQuery:function(e,t){var n;1&e&&u.sc(v,!0),2&e&&u.lc(n=u.bc())&&(t.loginElement=n.first)},decls:19,vars:6,consts:[["fxFlex","100%"],["fxLayout","column nowrap"],["fxLayout","column nowrap","fxLayoutAlign","center start",3,"formGroup","ngSubmit"],["matInput","","type","text","formControlName","email","placeholder","email"],["type","password","matInput","","formControlName","password","placeholder","mot de passe"],[1,"forgetPassword",3,"click"],["type","submitLogin","mat-raised-button","","color","accent",1,"buttonForm",3,"disabled"]],template:function(e,t){1&e&&(u.Sb(0,"mat-card",0),u.Sb(1,"mat-card-title"),u.Sb(2,"span"),u.wc(3,"Connexion"),u.Rb(),u.Rb(),u.Sb(4,"mat-card-content",1),u.Sb(5,"form",2),u.ac("ngSubmit",(function(){return t.login()})),u.Sb(6,"mat-form-field"),u.Nb(7,"input",3),u.Sb(8,"mat-error"),u.wc(9),u.dc(10,"inputMail"),u.Rb(),u.Rb(),u.Sb(11,"mat-form-field"),u.Nb(12,"input",4),u.Sb(13,"mat-error"),u.wc(14," mot de passe invalid"),u.Rb(),u.Rb(),u.Sb(15,"p",5),u.ac("click",(function(){return t.forgotPassword()})),u.wc(16,"mot de passe oubli\xe9 ?"),u.Rb(),u.Sb(17,"button",6),u.wc(18," jouer "),u.Rb(),u.Rb(),u.Rb(),u.Rb()),2&e&&(u.Cb(5),u.ic("formGroup",t.formGroup),u.Cb(4),u.xc(u.fc(10,3,t.formGroup.get("email").errors,"signIn")),u.Cb(8),u.ic("disabled",!t.formGroup.valid))},directives:[a.a,d.b,a.d,a.b,d.d,r.n,r.j,d.c,r.e,c.b,s.a,r.a,r.i,r.c,c.a,h.a],pipes:[w],styles:["mat-form-field[_ngcontent-%COMP%]{width:100%}.social-networks[_ngcontent-%COMP%]{margin:4px;padding:4px}.googleButton[_ngcontent-%COMP%]{background-image:url(/assets/images/signin_google.png)}.facebookButton[_ngcontent-%COMP%], .googleButton[_ngcontent-%COMP%]{width:180px;height:43px;background-size:contain}.facebookButton[_ngcontent-%COMP%]{background-image:url(/assets/images/signin_facebook.png)}.forgetPassword[_ngcontent-%COMP%]{text-align:center;color:#00f;cursor:pointer}"]}),e})(),S=(()=>{class e{constructor(e,t,n){this.http=e,this.accountService=t,this.router=n}ngOnInit(){this.formGroup=new r.d({name:new r.b("",r.m.required,this.validateName.bind(this)),email:new r.b("",[r.m.required,r.m.email],this.validateEmail.bind(this)),password:new r.b("",[r.m.required,this.matchingPassword.bind(this)]),confirm:new r.b("",[r.m.required,this.matchingConfirm.bind(this)])})}validateName(e){return new Promise((t,n)=>{this.accountService.checkName(e.value).subscribe(e=>{t(e?{nameExist:!0}:null)},e=>{console.log(e),t({backend:!0})})})}validateEmail(e){return new Promise((t,n)=>{this.accountService.checkEmail(e.value).subscribe(e=>{t(e?{emailExist:!0}:null)},e=>{t({backend:!0})})})}matchingPassword(e){return this.formGroup&&this.formGroup.value.confirm!==e.value?{nomatch:!0}:(this.formGroup&&this.formGroup.controls.confirm.setErrors(null),null)}matchingConfirm(e){return this.formGroup&&this.formGroup.value.password!==e.value?{nomatch:!0}:(this.formGroup&&this.formGroup.value&&this.formGroup.value.password&&this.formGroup.controls.password.setErrors(null),null)}create(){this.accountService.signUp(this.formGroup.value).subscribe(e=>{e&&alert("un email de confirmation vous a \xe9t\xe9 envoy\xe9.\n Vous pourrez activer votre compte en cliquant sur le lien.")})}}return e.\u0275fac=function(t){return new(t||e)(u.Mb(f.b),u.Mb(g.a),u.Mb(i.b))},e.\u0275cmp=u.Gb({type:e,selectors:[["app-signup"]],decls:24,vars:10,consts:[["fxFlex","100%"],["fxLayout","column nowrap"],["fxLayout","column nowrap","fxLayoutAlign","center start",3,"formGroup","ngSubmit"],["type","text","matInput","","formControlName","name","placeholder","nom"],["type","text","matInput","","formControlName","email","placeholder","email"],["type","password","matInput","","formControlName","password","placeholder","Mot de passe"],["type","password","matInput","","formControlName","confirm","placeholder","Confirmer mot de passe"],["type","submitLogin","mat-raised-button","","color","accent",1,"buttonForm",3,"disabled"]],template:function(e,t){1&e&&(u.Sb(0,"mat-card",0),u.Sb(1,"mat-card-title"),u.Sb(2,"span"),u.wc(3,"Cr\xe9er un compte"),u.Rb(),u.Rb(),u.Sb(4,"mat-card-content",1),u.Sb(5,"form",2),u.ac("ngSubmit",(function(){return t.create()})),u.Sb(6,"mat-form-field"),u.Nb(7,"input",3),u.Sb(8,"mat-error"),u.wc(9),u.dc(10,"inputMail"),u.Rb(),u.Rb(),u.Sb(11,"mat-form-field"),u.Nb(12,"input",4),u.Sb(13,"mat-error"),u.wc(14),u.dc(15,"inputMail"),u.Rb(),u.Rb(),u.Sb(16,"mat-form-field"),u.Nb(17,"input",5),u.Rb(),u.Sb(18,"mat-form-field"),u.Nb(19,"input",6),u.Sb(20,"mat-error"),u.wc(21,"les mots de passe ne correspondent pas"),u.Rb(),u.Rb(),u.Sb(22,"button",7),u.wc(23,"cr\xe9er"),u.Rb(),u.Rb(),u.Rb(),u.Rb()),2&e&&(u.Cb(5),u.ic("formGroup",t.formGroup),u.Cb(4),u.xc(u.fc(10,4,t.formGroup.get("name").errors,"create")),u.Cb(5),u.xc(u.fc(15,7,t.formGroup.get("email").errors,"create")),u.Cb(8),u.ic("disabled",!t.formGroup.valid))},directives:[a.a,d.b,a.d,a.b,d.d,r.n,r.j,d.c,r.e,c.b,s.a,r.a,r.i,r.c,c.a,h.a],pipes:[w],styles:["mat-form-field[_ngcontent-%COMP%]{width:100%}"]}),e})();const y=["class","connection"],x=function(e,t){return{"connection-main-center":e,"connection-main-safe":t}},R=function(e,t){return{"connection-sm":!0,"height-center":e,"height-safe":t}},G=function(e,t){return{"connection-normal":!0,"height-center":e,"height-safe":t}};let M=(()=>{let e=class{constructor(e){this.animationService=e,this.introAnimation="start",this.animationService.background_state.next("wait")}ngOnInit(){setTimeout(()=>{this.introAnimation="normal"},10)}heightIn(){return!!(document.getElementById("signContent")&&document.getElementById("signContent").offsetHeight<window.innerHeight)}};return e.\u0275fac=function(t){return new(t||e)(u.Mb(p.a))},e.\u0275cmp=u.Gb({type:e,selectors:[["app-account",8,"connection"]],attrs:y,decls:5,vars:14,consts:[["fxLayoutAlign","center start",1,"connection-main",2,"height","100%",3,"ngClass"],["id","signContent","fxLayout","column nowrap","fxFlex.lt-sm","100%","fxFlex.gt-xs","400px",3,"ngClass.lt-sm","ngClass.gt-xs"],[1,"signin"],[1,"signout"]],template:function(e,t){1&e&&(u.Sb(0,"div",0),u.Sb(1,"div",1),u.Nb(2,"app-signin",2),u.Nb(3,"p"),u.Nb(4,"app-signup",3),u.Rb(),u.Rb()),2&e&&(u.ic("ngClass",u.kc(5,x,t.heightIn(),!t.heightIn())),u.Cb(1),u.ic("ngClass.lt-sm",u.kc(8,R,t.heightIn(),!t.heightIn()))("ngClass.gt-xs",u.kc(11,G,t.heightIn(),!t.heightIn())),u.Cb(1),u.ic("@intro",t.introAnimation),u.Cb(2),u.ic("@intro",t.introAnimation))},directives:[d.c,o.j,b.a,d.d,d.b,C,S],styles:[".page[_ngcontent-%COMP%]{height:100%}.accountConnection[_ngcontent-%COMP%]{display:flex;flex-flow:column nowrap;justify-content:center;align-items:center}.signin[_ngcontent-%COMP%]{opacity:0}.signin[_ngcontent-%COMP%], .signout[_ngcontent-%COMP%]{width:100%}.connection-main-center[_ngcontent-%COMP%]{overflow:hidden}.connection-default[_ngcontent-%COMP%], .connection-sm[_ngcontent-%COMP%]{padding:10px}.height-center[_ngcontent-%COMP%]{align-self:center}.height-safe[_ngcontent-%COMP%]{align-self:normal}"],data:{animation:[Object(m.m)("intro",[Object(m.j)("start",Object(m.k)({opacity:0,transform:"scale(0.9,0.9)"})),Object(m.j)("normal",Object(m.k)({opacity:1,transform:"scale(1.0,1.0)"})),Object(m.l)("* => normal",Object(m.e)("1000ms 0ms ease-out"))])]}}),e})();var k=n("lJxs");const P=i.d.forChild([{path:"u",component:M,canActivate:[(()=>{class e{constructor(e,t){this.router=e,this.accountService=t}canActivate(e,t){return this.accountService.getAccount().pipe(Object(k.a)(e=>!e||(this.router.navigate(["u"]),!1)))}}return e.\u0275fac=function(t){return new(t||e)(u.Wb(i.b),u.Wb(g.a))},e.\u0275prov=u.Ib({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()]},{path:"confirmer",component:l.a},{path:"reinitialiserMotDePasse",component:(()=>{class e{constructor(e,t,n){this.router=e,this.route=t,this.account=n,this.formGroup=new r.d({password:new r.b(""),confirm:new r.b("")}),this.code=null}ngOnInit(){console.log(this.route.snapshot.queryParams.code),this.code=this.route.snapshot.queryParams.code}validate(){console.log(this.formGroup.value),this.code&&this.account.confirmResetPassword(this.code,this.formGroup.value.password,e=>{console.log(e),e?(alert("votre mot de passe a bien \xe9t\xe9 r\xe9initialis\xe9."),this.router.navigate(["/connection"])):alert("une petite erreur est survenue. Reessayez plus tard.")})}}return e.\u0275fac=function(t){return new(t||e)(u.Mb(i.b),u.Mb(i.a),u.Mb(g.a))},e.\u0275cmp=u.Gb({type:e,selectors:[["app-reinit-password"]],decls:13,vars:1,consts:[["fxLayoutAlign","center center","fxLayout","column nowrap",2,"height","80%"],["fxLayout","column nowrap"],[3,"formGroup"],["formControlName","password","placeholder","mot de passe","type","password"],["formControlName","confirm","placeholder","confirmer mot de passe","type","password"],[3,"click"]],template:function(e,t){1&e&&(u.Sb(0,"div",0),u.Sb(1,"div",1),u.Sb(2,"h3"),u.wc(3,"actualiser le mot de passe"),u.Rb(),u.Sb(4,"form",2),u.Sb(5,"p"),u.wc(6,"votre nouveau mot de passe"),u.Rb(),u.Nb(7,"input",3),u.Sb(8,"p"),u.wc(9,"confirmez"),u.Rb(),u.Nb(10,"input",4),u.Rb(),u.Sb(11,"button",5),u.ac("click",(function(){return t.validate()})),u.wc(12,"valider"),u.Rb(),u.Rb(),u.Rb()),2&e&&(u.Cb(4),u.ic("formGroup",t.formGroup))},directives:[d.c,d.d,r.n,r.j,r.e,r.a,r.i,r.c],styles:[""]}),e})()},{path:"*",redirectTo:"u",pathMatch:"full"},{path:"**",redirectTo:"u",pathMatch:"full"}]);var N=n("YUcS"),O=n("NFeN");let I=(()=>{class e{}return e.\u0275mod=u.Kb({type:e}),e.\u0275inj=u.Jb({factory:function(t){return new(t||e)},providers:[],imports:[[o.c,r.l,r.f,i.d,a.c,c.d,s.b,P,d.f,N.a,h.b,O.b,b.c]]}),e})()}}]);