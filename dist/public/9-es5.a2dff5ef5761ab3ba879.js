function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{"we/n":function(e,t,n){"use strict";n.r(t),n.d(t,"ConnectionModule",(function(){return B}));var o,i,r,a,c,s,l,u=n("ofXK"),m=n("3Pt+"),p=n("tyNb"),f=n("Wp6s"),d=n("kmnG"),b=n("qFsG"),h=n("Olzg"),g=n("R0Ic"),v=n("fXoL"),w=n("r479"),C=n("XiUz"),y=n("znSr"),k=n("tk/3"),x=n("hztc"),S=n("bTqV"),_=((o=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"transform",value:function(e,t){var n=null;return e&&("signIn"===t?e.backend?n="probl\xe8me technique":!0===e.emailNotExist?n="email non reconnu":!0===e.email&&(n="email invalid"):"create"===t&&(e.backend?n="probl\xe8me technique":!0===e.emailExist?n="email d\xe9j\xe0 pris":!0===e.email?n="email invalid":!0===e.nameExist?n="pseudo d\xe9j\xe0 pris":!0===e.require&&(n="champ requis"))),n}}]),e}()).\u0275fac=function(e){return new(e||o)},o.\u0275pipe=v.Lb({name:"inputMail",type:o,pure:!0}),o),R=["loginRef"],G=((r=function(){function e(t,n,o){_classCallCheck(this,e),this.http=t,this.accountService=n,this.router=o}return _createClass(e,[{key:"ngOnInit",value:function(){this.formGroup=new m.d({email:new m.b("",[m.m.required,m.m.email],this.validateEmail.bind(this)),password:new m.b("",m.m.required)})}},{key:"validateEmail",value:function(e){var t=this;return new Promise((function(n,o){t.accountService.checkEmail(e.value).subscribe((function(e){n(e?null:{emailNotExist:!0})}),(function(e){n({backend:!0})}))}))}},{key:"login",value:function(){this.formGroup.valid&&this.accountService.signIn(this.formGroup.value).subscribe((function(e){console.log(e)}),(function(e){console.log(e),alert("mot de passe incorrect.")}))}},{key:"prepareLoginButton",value:function(){this.auth2.attachClickHandler(this.loginElement.nativeElement,{},(function(e){var t=e.getBasicProfile();console.log("Token || "+e.getAuthResponse().id_token),console.log("ID: "+t.getId()),console.log("Name: "+t.getName()),console.log("Image URL: "+t.getImageUrl()),console.log("Email: "+t.getEmail())}),(function(e){}))}},{key:"googleSDK",value:function(){var e,t,n,o,i=this;window.googleSDKLoaded=function(){window.gapi.load("auth2",(function(){i.auth2=window.gapi.auth2.init({client_id:"212493728126-dr3lerpm5vnbbhqnavjqdfucd1ddbtef.apps.googleusercontent.com",scope:"profile email"}),i.prepareLoginButton()}))},t="google-jssdk",o=(e=document).getElementsByTagName("script")[0],e.getElementById(t)||((n=e.createElement("script")).id=t,n.src="https://apis.google.com/js/platform.js?onload=googleSDKLoaded",o.parentNode.insertBefore(n,o))}},{key:"forgotPassword",value:function(){var e=prompt("entrez votre email");e&&this.accountService.resetPassword(e,(function(e){e?alert("Merci. Un email de confirmation vous a \xe9t\xe9 envoy\xe9"):alert("cet email n'est pas valid")}))}}]),e}()).\u0275fac=function(e){return new(e||r)(v.Mb(k.b),v.Mb(x.a),v.Mb(p.b))},r.\u0275cmp=v.Gb({type:r,selectors:[["app-signin"]],viewQuery:function(e,t){var n;1&e&&v.tc(R,!0),2&e&&v.mc(n=v.bc())&&(t.loginElement=n.first)},decls:19,vars:6,consts:[["fxFlex","100%"],["fxLayout","column nowrap"],["fxLayout","column nowrap","fxLayoutAlign","center start",3,"formGroup","ngSubmit"],["matInput","","type","text","formControlName","email","placeholder","email"],["type","password","matInput","","formControlName","password","placeholder","mot de passe"],[1,"forgetPassword",3,"click"],["type","submitLogin","mat-raised-button","","color","accent",1,"buttonForm",3,"disabled"]],template:function(e,t){1&e&&(v.Sb(0,"mat-card",0),v.Sb(1,"mat-card-title"),v.Sb(2,"span"),v.xc(3,"Connexion"),v.Rb(),v.Rb(),v.Sb(4,"mat-card-content",1),v.Sb(5,"form",2),v.ac("ngSubmit",(function(){return t.login()})),v.Sb(6,"mat-form-field"),v.Nb(7,"input",3),v.Sb(8,"mat-error"),v.xc(9),v.dc(10,"inputMail"),v.Rb(),v.Rb(),v.Sb(11,"mat-form-field"),v.Nb(12,"input",4),v.Sb(13,"mat-error"),v.xc(14," mot de passe invalid"),v.Rb(),v.Rb(),v.Sb(15,"p",5),v.ac("click",(function(){return t.forgotPassword()})),v.xc(16,"mot de passe oubli\xe9 ?"),v.Rb(),v.Sb(17,"button",6),v.xc(18," jouer "),v.Rb(),v.Rb(),v.Rb(),v.Rb()),2&e&&(v.Cb(5),v.ic("formGroup",t.formGroup),v.Cb(4),v.yc(v.fc(10,3,t.formGroup.get("email").errors,"signIn")),v.Cb(8),v.ic("disabled",!t.formGroup.valid))},directives:[f.a,C.b,f.d,f.b,C.d,m.n,m.j,C.c,m.e,d.b,b.a,m.a,m.i,m.c,d.a,S.a],pipes:[_],styles:["mat-form-field[_ngcontent-%COMP%]{width:100%}.social-networks[_ngcontent-%COMP%]{margin:4px;padding:4px}.googleButton[_ngcontent-%COMP%]{background-image:url(/assets/images/signin_google.png)}.facebookButton[_ngcontent-%COMP%], .googleButton[_ngcontent-%COMP%]{width:180px;height:43px;background-size:contain}.facebookButton[_ngcontent-%COMP%]{background-image:url(/assets/images/signin_facebook.png)}.forgetPassword[_ngcontent-%COMP%]{text-align:center;color:#00f;cursor:pointer}"]}),r),M=((i=function(){function e(t,n,o){_classCallCheck(this,e),this.http=t,this.accountService=n,this.router=o}return _createClass(e,[{key:"ngOnInit",value:function(){this.formGroup=new m.d({name:new m.b("",m.m.required,this.validateName.bind(this)),email:new m.b("",[m.m.required,m.m.email],this.validateEmail.bind(this)),password:new m.b("",[m.m.required,this.matchingPassword.bind(this)]),confirm:new m.b("",[m.m.required,this.matchingConfirm.bind(this)])})}},{key:"validateName",value:function(e){var t=this;return new Promise((function(n,o){t.accountService.checkName(e.value).subscribe((function(e){n(e?{nameExist:!0}:null)}),(function(e){console.log(e),n({backend:!0})}))}))}},{key:"validateEmail",value:function(e){var t=this;return new Promise((function(n,o){t.accountService.checkEmail(e.value).subscribe((function(e){n(e?{emailExist:!0}:null)}),(function(e){n({backend:!0})}))}))}},{key:"matchingPassword",value:function(e){return this.formGroup&&this.formGroup.value.confirm!==e.value?{nomatch:!0}:(this.formGroup&&this.formGroup.controls.confirm.setErrors(null),null)}},{key:"matchingConfirm",value:function(e){return this.formGroup&&this.formGroup.value.password!==e.value?{nomatch:!0}:(this.formGroup&&this.formGroup.value&&this.formGroup.value.password&&this.formGroup.controls.password.setErrors(null),null)}},{key:"create",value:function(){this.accountService.signUp(this.formGroup.value).subscribe((function(e){e&&alert("un email de confirmation vous a \xe9t\xe9 envoy\xe9.\n Vous pourrez activer votre compte en cliquant sur le lien.")}))}}]),e}()).\u0275fac=function(e){return new(e||i)(v.Mb(k.b),v.Mb(x.a),v.Mb(p.b))},i.\u0275cmp=v.Gb({type:i,selectors:[["app-signup"]],decls:24,vars:10,consts:[["fxFlex","100%"],["fxLayout","column nowrap"],["fxLayout","column nowrap","fxLayoutAlign","center start",3,"formGroup","ngSubmit"],["type","text","matInput","","formControlName","name","placeholder","nom"],["type","text","matInput","","formControlName","email","placeholder","email"],["type","password","matInput","","formControlName","password","placeholder","Mot de passe"],["type","password","matInput","","formControlName","confirm","placeholder","Confirmer mot de passe"],["type","submitLogin","mat-raised-button","","color","accent",1,"buttonForm",3,"disabled"]],template:function(e,t){1&e&&(v.Sb(0,"mat-card",0),v.Sb(1,"mat-card-title"),v.Sb(2,"span"),v.xc(3,"Cr\xe9er un compte"),v.Rb(),v.Rb(),v.Sb(4,"mat-card-content",1),v.Sb(5,"form",2),v.ac("ngSubmit",(function(){return t.create()})),v.Sb(6,"mat-form-field"),v.Nb(7,"input",3),v.Sb(8,"mat-error"),v.xc(9),v.dc(10,"inputMail"),v.Rb(),v.Rb(),v.Sb(11,"mat-form-field"),v.Nb(12,"input",4),v.Sb(13,"mat-error"),v.xc(14),v.dc(15,"inputMail"),v.Rb(),v.Rb(),v.Sb(16,"mat-form-field"),v.Nb(17,"input",5),v.Rb(),v.Sb(18,"mat-form-field"),v.Nb(19,"input",6),v.Sb(20,"mat-error"),v.xc(21,"les mots de passe ne correspondent pas"),v.Rb(),v.Rb(),v.Sb(22,"button",7),v.xc(23,"cr\xe9er"),v.Rb(),v.Rb(),v.Rb(),v.Rb()),2&e&&(v.Cb(5),v.ic("formGroup",t.formGroup),v.Cb(4),v.yc(v.fc(10,4,t.formGroup.get("name").errors,"create")),v.Cb(5),v.yc(v.fc(15,7,t.formGroup.get("email").errors,"create")),v.Cb(8),v.ic("disabled",!t.formGroup.valid))},directives:[f.a,C.b,f.d,f.b,C.d,m.n,m.j,C.c,m.e,d.b,b.a,m.a,m.i,m.c,d.a,S.a],pipes:[_],styles:["mat-form-field[_ngcontent-%COMP%]{width:100%}"]}),i),P=["class","connection"],O=function(e,t){return{"connection-main-center":e,"connection-main-safe":t}},N=function(e,t){return{"connection-sm":!0,"height-center":e,"height-safe":t}},I=function(e,t){return{"connection-normal":!0,"height-center":e,"height-safe":t}},E=((a=function(){function e(t){_classCallCheck(this,e),this.animationService=t,this.introAnimation="start",this.animationService.background_state.next("wait")}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;setTimeout((function(){e.introAnimation="normal"}),10)}},{key:"heightIn",value:function(){return!!(document.getElementById("signContent")&&document.getElementById("signContent").offsetHeight<window.innerHeight)}}]),e}()).\u0275fac=function(e){return new(e||a)(v.Mb(w.a))},a.\u0275cmp=v.Gb({type:a,selectors:[["app-account",8,"connection"]],attrs:P,decls:5,vars:14,consts:[["fxLayoutAlign","center start",1,"connection-main",2,"height","100%",3,"ngClass"],["id","signContent","fxLayout","column nowrap","fxFlex.lt-sm","100%","fxFlex.gt-xs","400px",3,"ngClass.lt-sm","ngClass.gt-xs"],[1,"signin"],[1,"signout"]],template:function(e,t){1&e&&(v.Sb(0,"div",0),v.Sb(1,"div",1),v.Nb(2,"app-signin",2),v.Nb(3,"p"),v.Nb(4,"app-signup",3),v.Rb(),v.Rb()),2&e&&(v.ic("ngClass",v.lc(5,O,t.heightIn(),!t.heightIn())),v.Cb(1),v.ic("ngClass.lt-sm",v.lc(8,N,t.heightIn(),!t.heightIn()))("ngClass.gt-xs",v.lc(11,I,t.heightIn(),!t.heightIn())),v.Cb(1),v.ic("@intro",t.introAnimation),v.Cb(2),v.ic("@intro",t.introAnimation))},directives:[C.c,u.l,y.a,C.d,C.b,G,M],styles:[".page[_ngcontent-%COMP%]{height:100%}.accountConnection[_ngcontent-%COMP%]{display:flex;flex-flow:column nowrap;justify-content:center;align-items:center}.signin[_ngcontent-%COMP%]{opacity:0}.signin[_ngcontent-%COMP%], .signout[_ngcontent-%COMP%]{width:100%}.connection-main-center[_ngcontent-%COMP%]{overflow:hidden}.connection-default[_ngcontent-%COMP%], .connection-sm[_ngcontent-%COMP%]{padding:10px}.height-center[_ngcontent-%COMP%]{align-self:center}.height-safe[_ngcontent-%COMP%]{align-self:normal}"],data:{animation:[Object(g.m)("intro",[Object(g.j)("start",Object(g.k)({opacity:0,transform:"scale(0.9,0.9)"})),Object(g.j)("normal",Object(g.k)({opacity:1,transform:"scale(1.0,1.0)"})),Object(g.l)("* => normal",Object(g.e)("1000ms 0ms ease-out"))])]}}),a),j=n("lJxs"),L=p.d.forChild([{path:"u",component:E,canActivate:[(s=function(){function e(t,n){_classCallCheck(this,e),this.router=t,this.accountService=n}return _createClass(e,[{key:"canActivate",value:function(e,t){var n=this;return this.accountService.getAccount().pipe(Object(j.a)((function(e){return!e||(n.router.navigate(["u"]),!1)})))}}]),e}(),s.\u0275fac=function(e){return new(e||s)(v.Wb(p.b),v.Wb(x.a))},s.\u0275prov=v.Ib({token:s,factory:s.\u0275fac,providedIn:"root"}),s)]},{path:"confirmer",component:h.a},{path:"reinitialiserMotDePasse",component:(c=function(){function e(t,n,o){_classCallCheck(this,e),this.router=t,this.route=n,this.account=o,this.formGroup=new m.d({password:new m.b(""),confirm:new m.b("")}),this.code=null}return _createClass(e,[{key:"ngOnInit",value:function(){console.log(this.route.snapshot.queryParams.code),this.code=this.route.snapshot.queryParams.code}},{key:"validate",value:function(){var e=this;console.log(this.formGroup.value),this.code&&this.account.confirmResetPassword(this.code,this.formGroup.value.password,(function(t){console.log(t),t?(alert("votre mot de passe a bien \xe9t\xe9 r\xe9initialis\xe9."),e.router.navigate(["/connection"])):alert("une petite erreur est survenue. Reessayez plus tard.")}))}}]),e}(),c.\u0275fac=function(e){return new(e||c)(v.Mb(p.b),v.Mb(p.a),v.Mb(x.a))},c.\u0275cmp=v.Gb({type:c,selectors:[["app-reinit-password"]],decls:13,vars:1,consts:[["fxLayoutAlign","center center","fxLayout","column nowrap",2,"height","80%"],["fxLayout","column nowrap"],[3,"formGroup"],["formControlName","password","placeholder","mot de passe","type","password"],["formControlName","confirm","placeholder","confirmer mot de passe","type","password"],[3,"click"]],template:function(e,t){1&e&&(v.Sb(0,"div",0),v.Sb(1,"div",1),v.Sb(2,"h3"),v.xc(3,"actualiser le mot de passe"),v.Rb(),v.Sb(4,"form",2),v.Sb(5,"p"),v.xc(6,"votre nouveau mot de passe"),v.Rb(),v.Nb(7,"input",3),v.Sb(8,"p"),v.xc(9,"confirmez"),v.Rb(),v.Nb(10,"input",4),v.Rb(),v.Sb(11,"button",5),v.ac("click",(function(){return t.validate()})),v.xc(12,"valider"),v.Rb(),v.Rb(),v.Rb()),2&e&&(v.Cb(4),v.ic("formGroup",t.formGroup))},directives:[C.c,C.d,m.n,m.j,m.e,m.a,m.i,m.c],styles:[""]}),c)},{path:"*",redirectTo:"u",pathMatch:"full"},{path:"**",redirectTo:"u",pathMatch:"full"}]),q=n("YUcS"),A=n("NFeN"),B=((l=function e(){_classCallCheck(this,e)}).\u0275mod=v.Kb({type:l}),l.\u0275inj=v.Jb({factory:function(e){return new(e||l)},providers:[],imports:[[u.c,m.l,m.f,p.d,f.c,d.d,b.b,L,C.f,q.a,S.b,A.b,y.d]]}),l)}}]);