(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{"we/n":function(t,e,n){"use strict";n.r(e),n.d(e,"ConnectionModule",(function(){return N}));var o=n("ofXK"),i=n("3Pt+"),r=n("tyNb"),a=n("Wp6s"),c=n("kmnG"),s=n("qFsG"),l=n("Olzg"),m=n("R0Ic"),u=n("fXoL"),p=n("r479"),b=n("XiUz"),d=n("znSr"),g=n("tk/3"),f=n("hztc"),h=n("bTqV");let w=(()=>{class t{transform(t,e){let n=null;return t&&("signIn"===e?t.backend?n="probl\xe8me technique":!0===t.emailNotExist?n="email non reconnu":!0===t.email&&(n="email invalid"):"create"===e&&(t.backend?n="probl\xe8me technique":!0===t.emailExist?n="email d\xe9j\xe0 pris":!0===t.email?n="email invalid":!0===t.nameExist?n="pseudo d\xe9j\xe0 pris":!0===t.require&&(n="champ requis"))),n}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=u.Lb({name:"inputMail",type:t,pure:!0}),t})();const v=["loginRef"];let C=(()=>{class t{constructor(t,e,n){this.http=t,this.accountService=e,this.router=n}ngOnInit(){this.formGroup=new i.d({email:new i.b("",[i.m.required,i.m.email],this.validateEmail.bind(this)),password:new i.b("",i.m.required)})}validateEmail(t){return new Promise((e,n)=>{this.accountService.checkEmail(t.value).subscribe(t=>{e(t?null:{emailNotExist:!0})},t=>{e({backend:!0})})})}login(){this.formGroup.valid&&this.accountService.signIn(this.formGroup.value).subscribe(t=>{})}prepareLoginButton(){this.auth2.attachClickHandler(this.loginElement.nativeElement,{},t=>{let e=t.getBasicProfile();console.log("Token || "+t.getAuthResponse().id_token),console.log("ID: "+e.getId()),console.log("Name: "+e.getName()),console.log("Image URL: "+e.getImageUrl()),console.log("Email: "+e.getEmail())},t=>{})}googleSDK(){var t,e,n,o;window.googleSDKLoaded=()=>{window.gapi.load("auth2",()=>{this.auth2=window.gapi.auth2.init({client_id:"212493728126-dr3lerpm5vnbbhqnavjqdfucd1ddbtef.apps.googleusercontent.com",scope:"profile email"}),this.prepareLoginButton()})},e="google-jssdk",o=(t=document).getElementsByTagName("script")[0],t.getElementById(e)||((n=t.createElement("script")).id=e,n.src="https://apis.google.com/js/platform.js?onload=googleSDKLoaded",o.parentNode.insertBefore(n,o))}}return t.\u0275fac=function(e){return new(e||t)(u.Mb(g.b),u.Mb(f.a),u.Mb(r.a))},t.\u0275cmp=u.Gb({type:t,selectors:[["app-signin"]],viewQuery:function(t,e){var n;1&t&&u.sc(v,!0),2&t&&u.lc(n=u.bc())&&(e.loginElement=n.first)},decls:17,vars:6,consts:[["fxFlex","100%"],["fxLayout","column nowrap"],["fxLayout","column nowrap","fxLayoutAlign","center start",3,"formGroup","ngSubmit"],["matInput","","type","text","formControlName","email","placeholder","email"],["type","password","matInput","","formControlName","password","placeholder","mot de passe"],["type","submitLogin","mat-raised-button","","color","accent",1,"buttonForm",3,"disabled"]],template:function(t,e){1&t&&(u.Sb(0,"mat-card",0),u.Sb(1,"mat-card-title"),u.Sb(2,"span"),u.wc(3,"Connexion"),u.Rb(),u.Rb(),u.Sb(4,"mat-card-content",1),u.Sb(5,"form",2),u.ac("ngSubmit",(function(){return e.login()})),u.Sb(6,"mat-form-field"),u.Nb(7,"input",3),u.Sb(8,"mat-error"),u.wc(9),u.dc(10,"inputMail"),u.Rb(),u.Rb(),u.Sb(11,"mat-form-field"),u.Nb(12,"input",4),u.Sb(13,"mat-error"),u.wc(14," mot de passe invalid"),u.Rb(),u.Rb(),u.Sb(15,"button",5),u.wc(16," jouer "),u.Rb(),u.Rb(),u.Rb(),u.Rb()),2&t&&(u.Cb(5),u.ic("formGroup",e.formGroup),u.Cb(4),u.xc(u.fc(10,3,e.formGroup.get("email").errors,"signIn")),u.Cb(6),u.ic("disabled",!e.formGroup.valid))},directives:[a.a,b.b,a.d,a.b,b.d,i.n,i.j,b.c,i.e,c.b,s.a,i.a,i.i,i.c,c.a,h.a],pipes:[w],styles:["mat-form-field[_ngcontent-%COMP%]{width:100%}.social-networks[_ngcontent-%COMP%]{margin:4px;padding:4px}.googleButton[_ngcontent-%COMP%]{background-image:url(/assets/images/signin_google.png)}.facebookButton[_ngcontent-%COMP%], .googleButton[_ngcontent-%COMP%]{width:180px;height:43px;background-size:contain}.facebookButton[_ngcontent-%COMP%]{background-image:url(/assets/images/signin_facebook.png)}"]}),t})(),S=(()=>{class t{constructor(t,e,n){this.http=t,this.accountService=e,this.router=n}ngOnInit(){this.formGroup=new i.d({name:new i.b("",i.m.required,this.validateName.bind(this)),email:new i.b("",[i.m.required,i.m.email],this.validateEmail.bind(this)),password:new i.b("",[i.m.required,this.matchingPassword.bind(this)]),confirm:new i.b("",[i.m.required,this.matchingConfirm.bind(this)])})}validateName(t){return new Promise((e,n)=>{this.accountService.checkName(t.value).subscribe(t=>{e(t?{nameExist:!0}:null)},t=>{console.log(t),e({backend:!0})})})}validateEmail(t){return new Promise((e,n)=>{this.accountService.checkEmail(t.value).subscribe(t=>{e(t?{emailExist:!0}:null)},t=>{e({backend:!0})})})}matchingPassword(t){return this.formGroup&&this.formGroup.value.confirm!==t.value?{nomatch:!0}:(this.formGroup&&this.formGroup.controls.confirm.setErrors(null),null)}matchingConfirm(t){return this.formGroup&&this.formGroup.value.password!==t.value?{nomatch:!0}:(this.formGroup&&this.formGroup.value&&this.formGroup.value.password&&this.formGroup.controls.password.setErrors(null),null)}create(){this.accountService.signUp(this.formGroup.value).subscribe(t=>{t&&alert("un email de confirmation vous a \xe9t\xe9 envoy\xe9.\n Vous pourrez activer votre compte en cliquant sur le lien.")})}}return t.\u0275fac=function(e){return new(e||t)(u.Mb(g.b),u.Mb(f.a),u.Mb(r.a))},t.\u0275cmp=u.Gb({type:t,selectors:[["app-signup"]],decls:24,vars:10,consts:[["fxFlex","100%"],["fxLayout","column nowrap"],["fxLayout","column nowrap","fxLayoutAlign","center start",3,"formGroup","ngSubmit"],["type","text","matInput","","formControlName","name","placeholder","nom"],["type","text","matInput","","formControlName","email","placeholder","email"],["type","password","matInput","","formControlName","password","placeholder","Mot de passe"],["type","password","matInput","","formControlName","confirm","placeholder","Confirmer mot de passe"],["type","submitLogin","mat-raised-button","","color","accent",1,"buttonForm",3,"disabled"]],template:function(t,e){1&t&&(u.Sb(0,"mat-card",0),u.Sb(1,"mat-card-title"),u.Sb(2,"span"),u.wc(3,"Cr\xe9er un compte"),u.Rb(),u.Rb(),u.Sb(4,"mat-card-content",1),u.Sb(5,"form",2),u.ac("ngSubmit",(function(){return e.create()})),u.Sb(6,"mat-form-field"),u.Nb(7,"input",3),u.Sb(8,"mat-error"),u.wc(9),u.dc(10,"inputMail"),u.Rb(),u.Rb(),u.Sb(11,"mat-form-field"),u.Nb(12,"input",4),u.Sb(13,"mat-error"),u.wc(14),u.dc(15,"inputMail"),u.Rb(),u.Rb(),u.Sb(16,"mat-form-field"),u.Nb(17,"input",5),u.Rb(),u.Sb(18,"mat-form-field"),u.Nb(19,"input",6),u.Sb(20,"mat-error"),u.wc(21,"les mots de passe ne correspondent pas"),u.Rb(),u.Rb(),u.Sb(22,"button",7),u.wc(23,"cr\xe9er"),u.Rb(),u.Rb(),u.Rb(),u.Rb()),2&t&&(u.Cb(5),u.ic("formGroup",e.formGroup),u.Cb(4),u.xc(u.fc(10,4,e.formGroup.get("name").errors,"create")),u.Cb(5),u.xc(u.fc(15,7,e.formGroup.get("email").errors,"create")),u.Cb(8),u.ic("disabled",!e.formGroup.valid))},directives:[a.a,b.b,a.d,a.b,b.d,i.n,i.j,b.c,i.e,c.b,s.a,i.a,i.i,i.c,c.a,h.a],pipes:[w],styles:["mat-form-field[_ngcontent-%COMP%]{width:100%}"]}),t})();const x=["class","connection"],y=function(t,e){return{"connection-main-center":t,"connection-main-safe":e}},M=function(t,e){return{"connection-sm":!0,"height-center":t,"height-safe":e}},G=function(t,e){return{"connection-normal":!0,"height-center":t,"height-safe":e}};let k=(()=>{let t=class{constructor(t){this.animationService=t,this.introAnimation="start",this.animationService.background_state.next("wait")}ngOnInit(){setTimeout(()=>{this.introAnimation="normal"},10)}heightIn(){return!!(document.getElementById("signContent")&&document.getElementById("signContent").offsetHeight<window.innerHeight)}};return t.\u0275fac=function(e){return new(e||t)(u.Mb(p.a))},t.\u0275cmp=u.Gb({type:t,selectors:[["app-account",8,"connection"]],attrs:x,decls:5,vars:14,consts:[["fxLayoutAlign","center start",1,"connection-main",2,"height","100%",3,"ngClass"],["id","signContent","fxLayout","column nowrap","fxFlex.lt-sm","100%","fxFlex.gt-xs","400px",3,"ngClass.lt-sm","ngClass.gt-xs"],[1,"signin"],[1,"signout"]],template:function(t,e){1&t&&(u.Sb(0,"div",0),u.Sb(1,"div",1),u.Nb(2,"app-signin",2),u.Nb(3,"p"),u.Nb(4,"app-signup",3),u.Rb(),u.Rb()),2&t&&(u.ic("ngClass",u.kc(5,y,e.heightIn(),!e.heightIn())),u.Cb(1),u.ic("ngClass.lt-sm",u.kc(8,M,e.heightIn(),!e.heightIn()))("ngClass.gt-xs",u.kc(11,G,e.heightIn(),!e.heightIn())),u.Cb(1),u.ic("@intro",e.introAnimation),u.Cb(2),u.ic("@intro",e.introAnimation))},directives:[b.c,o.i,d.a,b.d,b.b,C,S],styles:[".page[_ngcontent-%COMP%]{height:100%}.accountConnection[_ngcontent-%COMP%]{display:flex;flex-flow:column nowrap;justify-content:center;align-items:center}.signin[_ngcontent-%COMP%]{opacity:0}.signin[_ngcontent-%COMP%], .signout[_ngcontent-%COMP%]{width:100%}.connection-main-center[_ngcontent-%COMP%]{overflow:hidden}.connection-default[_ngcontent-%COMP%], .connection-sm[_ngcontent-%COMP%]{padding:10px}.height-center[_ngcontent-%COMP%]{align-self:center}.height-safe[_ngcontent-%COMP%]{align-self:normal}"],data:{animation:[Object(m.m)("intro",[Object(m.j)("start",Object(m.k)({opacity:0,transform:"scale(0.9,0.9)"})),Object(m.j)("normal",Object(m.k)({opacity:1,transform:"scale(1.0,1.0)"})),Object(m.l)("* => normal",Object(m.e)("1000ms 0ms ease-out"))])]}}),t})();var I=n("lJxs");const O=r.c.forChild([{path:"u",component:k,canActivate:[(()=>{class t{constructor(t,e){this.router=t,this.accountService=e}canActivate(t,e){return this.accountService.getAccount().pipe(Object(I.a)(t=>!t||(this.router.navigate(["u"]),!1)))}}return t.\u0275fac=function(e){return new(e||t)(u.Wb(r.a),u.Wb(f.a))},t.\u0275prov=u.Ib({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()]},{path:"confirmer",component:l.a},{path:"*",redirectTo:"u",pathMatch:"full"},{path:"**",redirectTo:"u",pathMatch:"full"}]);var R=n("NFeN");let N=(()=>{class t{}return t.\u0275mod=u.Kb({type:t}),t.\u0275inj=u.Jb({factory:function(e){return new(e||t)},providers:[],imports:[[o.c,i.l,i.f,r.c,a.c,c.d,s.b,O,b.f,h.b,R.b,d.c]]}),t})()}}]);