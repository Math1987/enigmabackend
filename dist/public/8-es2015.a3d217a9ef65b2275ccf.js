(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{"we/n":function(t,e,n){"use strict";n.r(e),n.d(e,"ConnectionModule",(function(){return G}));var o=n("ofXK"),i=n("3Pt+"),r=n("tyNb"),a=n("Wp6s"),s=n("kmnG"),c=n("qFsG"),l=n("R0Ic"),m=n("IYfF"),u=n("fXoL"),b=n("r479"),p=n("XiUz"),g=n("znSr"),d=n("AytR"),f=n("tk/3"),h=n("bTqV");let w=(()=>{class t{transform(t,e){let n=null;return t&&("signIn"===e?t.backend?n="probl\xe8me technique":!0===t.emailNotExist?n="email non reconnu":!0===t.email&&(n="email invalid"):"create"===e&&(t.backend?n="probl\xe8me technique":!0===t.emailExist?n="email d\xe9j\xe0 pris":!0===t.email?n="email invalid":!0===t.nameExist?n="pseudo d\xe9j\xe0 pris":!0===t.require&&(n="champ requis"))),n}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=u.Kb({name:"inputMail",type:t,pure:!0}),t})();const v=["loginRef"];let P=(()=>{class t{constructor(t,e,n){this.http=t,this.userService=e,this.router=n}ngOnInit(){this.formGroup=new i.d({email:new i.b("",[i.m.required,i.m.email],this.validateEmail.bind(this)),password:new i.b("",i.m.required)})}validateEmail(t){return console.log(`${d.a.apiURL}/checkEmail?email=${t.value}`),new Promise((e,n)=>{this.http.get(`${d.a.apiURL}/checkEmail?email=${t.value}`).subscribe(t=>{e(t?null:{emailNotExist:!0})},t=>{e({backend:!0})})})}login(){this.formGroup.valid&&this.userService.signIn(this.formGroup.value).subscribe(t=>{this.router.navigate(["u"])})}prepareLoginButton(){this.auth2.attachClickHandler(this.loginElement.nativeElement,{},t=>{let e=t.getBasicProfile();console.log("Token || "+t.getAuthResponse().id_token),console.log("ID: "+e.getId()),console.log("Name: "+e.getName()),console.log("Image URL: "+e.getImageUrl()),console.log("Email: "+e.getEmail())},t=>{console.log(JSON.stringify(t,void 0,2))})}googleSDK(){var t,e,n,o;window.googleSDKLoaded=()=>{window.gapi.load("auth2",()=>{this.auth2=window.gapi.auth2.init({client_id:"212493728126-dr3lerpm5vnbbhqnavjqdfucd1ddbtef.apps.googleusercontent.com",scope:"profile email"}),this.prepareLoginButton()})},e="google-jssdk",o=(t=document).getElementsByTagName("script")[0],t.getElementById(e)||((n=t.createElement("script")).id=e,n.src="https://apis.google.com/js/platform.js?onload=googleSDKLoaded",o.parentNode.insertBefore(n,o))}}return t.\u0275fac=function(e){return new(e||t)(u.Lb(f.b),u.Lb(m.a),u.Lb(r.a))},t.\u0275cmp=u.Fb({type:t,selectors:[["app-signin"]],viewQuery:function(t,e){var n;1&t&&u.pc(v,!0),2&t&&u.ic(n=u.Zb())&&(e.loginElement=n.first)},decls:22,vars:6,consts:[["fxFlex","100%"],["fxLayout","column nowrap"],["fxLayout","column nowrap","fxLayoutAlign","center start",3,"formGroup","ngSubmit"],["matInput","","type","text","formControlName","email","placeholder","email"],["type","password","matInput","","formControlName","password","placeholder","mot de passe"],["type","submitLogin","mat-raised-button","","color","accent",1,"buttonForm",3,"disabled"],["fxFlex","100%","fxLayout","row nowrap","fxLayoutAlign","center center",1,"social-networks"],["mat-button","","type","button","mb-fab","",1,"googleButton"],["loginRef",""],["mat-button","","type","button","mb-fab","",1,"facebookButton"]],template:function(t,e){1&t&&(u.Qb(0,"mat-card",0),u.Qb(1,"mat-card-title"),u.Qb(2,"span"),u.sc(3,"Connexion"),u.Pb(),u.Pb(),u.Qb(4,"mat-card-content",1),u.Qb(5,"form",2),u.Yb("ngSubmit",(function(){return e.login()})),u.Qb(6,"mat-form-field"),u.Mb(7,"input",3),u.Qb(8,"mat-error"),u.sc(9),u.bc(10,"inputMail"),u.Pb(),u.Pb(),u.Qb(11,"mat-form-field"),u.Mb(12,"input",4),u.Qb(13,"mat-error"),u.sc(14," mot de passe invalid"),u.Pb(),u.Pb(),u.Qb(15,"button",5),u.sc(16,"jouer"),u.Pb(),u.Pb(),u.Qb(17,"div",6),u.Mb(18,"button",7,8),u.Mb(20,"button",9,8),u.Pb(),u.Pb(),u.Pb()),2&t&&(u.Bb(5),u.gc("formGroup",e.formGroup),u.Bb(4),u.tc(u.dc(10,3,e.formGroup.get("email").errors,"signIn")),u.Bb(6),u.gc("disabled",!e.formGroup.valid))},directives:[a.a,p.b,a.d,a.b,p.d,i.n,i.j,p.c,i.e,s.b,c.a,i.a,i.i,i.c,s.a,h.b],pipes:[w],styles:["mat-form-field[_ngcontent-%COMP%]{width:100%}.social-networks[_ngcontent-%COMP%]{margin:4px;padding:4px}.googleButton[_ngcontent-%COMP%]{background-image:url(/assets/images/signin_google.png)}.facebookButton[_ngcontent-%COMP%], .googleButton[_ngcontent-%COMP%]{width:180px;height:43px;background-size:contain}.facebookButton[_ngcontent-%COMP%]{background-image:url(/assets/images/signin_facebook.png)}"]}),t})(),x=(()=>{class t{constructor(t,e,n){this.http=t,this.authService=e,this.router=n}ngOnInit(){this.formGroup=new i.d({name:new i.b("",i.m.required,this.validateName.bind(this)),email:new i.b("",[i.m.required,i.m.email],this.validateEmail.bind(this)),password:new i.b("",[i.m.required,this.matchingPassword.bind(this)]),confirm:new i.b("",[i.m.required,this.matchingConfirm.bind(this)])})}validateName(t){return new Promise((e,n)=>{this.http.get(`${d.a.apiURL}/checkAccountName?name=${t.value}`).subscribe(t=>{e(t?{nameExist:!0}:null)},t=>{e({backend:!0})})})}validateEmail(t){return new Promise((e,n)=>{this.http.get(`${d.a.apiURL}/checkEmail?email=${t.value}`).subscribe(t=>{e(t?{emailExist:!0}:null)},t=>{e({backend:!0})})})}matchingPassword(t){return this.formGroup&&this.formGroup.value.confirm!==t.value?{nomatch:!0}:(this.formGroup&&this.formGroup.controls.confirm.setErrors(null),null)}matchingConfirm(t){return this.formGroup&&this.formGroup.value.password!==t.value?{nomatch:!0}:(this.formGroup&&this.formGroup.value&&this.formGroup.value.password&&this.formGroup.controls.password.setErrors(null),null)}create(){this.authService.signUp(this.formGroup.value).subscribe(t=>{t&&this.authService.signIn(t).subscribe(t=>{this.router.navigate(["u","bienvenue"])})})}}return t.\u0275fac=function(e){return new(e||t)(u.Lb(f.b),u.Lb(m.a),u.Lb(r.a))},t.\u0275cmp=u.Fb({type:t,selectors:[["app-signup"]],decls:24,vars:10,consts:[["fxFlex","100%"],["fxLayout","column nowrap"],["fxLayout","column nowrap","fxLayoutAlign","center start",3,"formGroup","ngSubmit"],["type","text","matInput","","formControlName","name","placeholder","nom"],["type","text","matInput","","formControlName","email","placeholder","email"],["type","password","matInput","","formControlName","password","placeholder","Mot de passe"],["type","password","matInput","","formControlName","confirm","placeholder","Confirmer mot de passe"],["type","submitLogin","mat-raised-button","","color","accent",1,"buttonForm",3,"disabled"]],template:function(t,e){1&t&&(u.Qb(0,"mat-card",0),u.Qb(1,"mat-card-title"),u.Qb(2,"span"),u.sc(3,"Cr\xe9er un compte"),u.Pb(),u.Pb(),u.Qb(4,"mat-card-content",1),u.Qb(5,"form",2),u.Yb("ngSubmit",(function(){return e.create()})),u.Qb(6,"mat-form-field"),u.Mb(7,"input",3),u.Qb(8,"mat-error"),u.sc(9),u.bc(10,"inputMail"),u.Pb(),u.Pb(),u.Qb(11,"mat-form-field"),u.Mb(12,"input",4),u.Qb(13,"mat-error"),u.sc(14),u.bc(15,"inputMail"),u.Pb(),u.Pb(),u.Qb(16,"mat-form-field"),u.Mb(17,"input",5),u.Pb(),u.Qb(18,"mat-form-field"),u.Mb(19,"input",6),u.Qb(20,"mat-error"),u.sc(21,"les mots de passe ne correspondent pas"),u.Pb(),u.Pb(),u.Qb(22,"button",7),u.sc(23,"cr\xe9er"),u.Pb(),u.Pb(),u.Pb(),u.Pb()),2&t&&(u.Bb(5),u.gc("formGroup",e.formGroup),u.Bb(4),u.tc(u.dc(10,4,e.formGroup.get("name").errors,"create")),u.Bb(5),u.tc(u.dc(15,7,e.formGroup.get("email").errors,"create")),u.Bb(8),u.gc("disabled",!e.formGroup.valid))},directives:[a.a,p.b,a.d,a.b,p.d,i.n,i.j,p.c,i.e,s.b,c.a,i.a,i.i,i.c,s.a,h.b],pipes:[w],styles:["mat-form-field[_ngcontent-%COMP%]{width:100%}"]}),t})();const y=["class","connection"],C=function(t,e){return{"connection-main-center":t,"connection-main-safe":e}},I=function(t,e){return{"connection-sm":!0,"height-center":t,"height-safe":e}},L=function(t,e){return{"connection-normal":!0,"height-center":t,"height-safe":e}},M=r.d.forChild([{path:"",component:(()=>{let t=class{constructor(t){this.animationService=t,localStorage.removeItem(m.a.LOCAL_JWT),this.animationService.background_state.next("wait")}ngOnInit(){}heightIn(){return!!(document.getElementById("signContent")&&document.getElementById("signContent").offsetHeight<window.innerHeight)}};return t.\u0275fac=function(e){return new(e||t)(u.Lb(b.a))},t.\u0275cmp=u.Fb({type:t,selectors:[["app-account",8,"connection"]],attrs:y,decls:5,vars:14,consts:[["fxLayoutAlign","center start",1,"connection-main",2,"height","100%",3,"ngClass"],["id","signContent","fxLayout","column nowrap","fxFlex.lt-sm","100%","fxFlex.gt-xs","400px",3,"ngClass.lt-sm","ngClass.gt-xs"],[1,"signin"],[1,"signout"]],template:function(t,e){1&t&&(u.Qb(0,"div",0),u.Qb(1,"div",1),u.Mb(2,"app-signin",2),u.Mb(3,"p"),u.Mb(4,"app-signup",3),u.Pb(),u.Pb()),2&t&&(u.gc("ngClass",u.hc(5,C,e.heightIn(),!e.heightIn())),u.Bb(1),u.gc("ngClass.lt-sm",u.hc(8,I,e.heightIn(),!e.heightIn()))("ngClass.gt-xs",u.hc(11,L,e.heightIn(),!e.heightIn())),u.Bb(1),u.gc("@intro","normal"),u.Bb(2),u.gc("@intro","normal"))},directives:[p.c,o.i,g.a,p.d,p.b,P,x],styles:[".page[_ngcontent-%COMP%]{height:100%}.accountConnection[_ngcontent-%COMP%]{display:flex;flex-flow:column nowrap;justify-content:center;align-items:center}.signin[_ngcontent-%COMP%], .signout[_ngcontent-%COMP%]{opacity:0;width:100%;transform:scale(.9)}.connection-main-center[_ngcontent-%COMP%]{overflow:hidden}.connection-default[_ngcontent-%COMP%], .connection-sm[_ngcontent-%COMP%]{padding:10px}.height-center[_ngcontent-%COMP%]{align-self:center}.height-safe[_ngcontent-%COMP%]{align-self:normal}"],data:{animation:[Object(l.m)("intro",[Object(l.j)("normal",Object(l.k)({opacity:1,transform:"scale(1)"})),Object(l.l)("* => normal",Object(l.e)("1000ms 0ms ease-out"))])]}}),t})(),canActivate:[(()=>{class t{constructor(t){this.router=t}canActivate(t,e){return!localStorage.getItem(m.a.LOCAL_JWT)||(this.router.navigate(["u"]),!1)}}return t.\u0275fac=function(e){return new(e||t)(u.Ub(r.a))},t.\u0275prov=u.Hb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()]}]);var k=n("NFeN");let G=(()=>{class t{}return t.\u0275mod=u.Jb({type:t}),t.\u0275inj=u.Ib({factory:function(e){return new(e||t)},providers:[],imports:[[o.c,i.l,i.f,r.d,a.c,s.d,c.b,M,p.f,h.c,k.b,g.c]]}),t})()}}]);