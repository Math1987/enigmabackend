(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{X2qB:function(t,c,e){"use strict";e.r(c),e.d(c,"MainModule",(function(){return L}));var n=e("ofXK"),i=e("tyNb"),s=e("jtHE"),o=e("2Vo4"),r=e("fXoL"),a=e("q6HN"),l=e("AytR"),b=e("gFX4"),u=e("hrsj"),p=e("tk/3");let d=(()=>{class t{constructor(t,c,e){this.tokenService=t,this.adminService=c,this.http=e,this.socket=null,this.socketObservable=new o.a(null),this.adminService.getAdmin().subscribe(c=>{console.log("admin for socket",c,t.token),c&&(this.socket=b.connect(`${l.a.backURL}`,{query:{token:t.token,worldName:"world1"}}),this.socketObservable.next(this.socket))})}}return t.\u0275fac=function(c){return new(c||t)(r.Wb(u.a),r.Wb(a.a),r.Wb(p.b))},t.\u0275prov=r.Ib({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var f=e("5RKK");let v=(()=>{class t{transform(t,...c){return"key"===t||"x"===t||"y"===t||"key_"===t||"id"===t?null:t}}return t.\u0275fac=function(c){return new(c||t)},t.\u0275pipe=r.Lb({name:"keyFree",type:t,pure:!0}),t})();const h=["viewver"];function m(t,c){if(1&t){const t=r.Tb();r.Sb(0,"button",2),r.ac("click",(function(){r.pc(t);const e=c.$implicit;return r.cc(2).selectWorld(e)})),r.xc(1),r.Rb()}if(2&t){const t=c.$implicit;r.Cb(1),r.zc(" ",t.name," ")}}function w(t,c){if(1&t&&(r.Sb(0,"div"),r.vc(1,m,2,1,"button",1),r.Rb()),2&t){const t=c.$implicit;r.Cb(1),r.ic("ngForOf",t)}}function g(t,c){if(1&t&&(r.Sb(0,"div"),r.Nb(1,"br"),r.Sb(2,"p"),r.xc(3),r.Rb(),r.Sb(4,"p"),r.xc(5),r.Rb(),r.Sb(6,"p"),r.xc(7),r.Rb(),r.Rb()),2&t){const t=c.$implicit;r.Cb(3),r.zc("key: ",t.key_,""),r.Cb(2),r.zc("color : ",t.color,""),r.Cb(2),r.zc("img : ",t.img,"")}}function k(t,c){if(1&t){const t=r.Tb();r.Sb(0,"div"),r.Nb(1,"input",15,16),r.Sb(3,"button",2),r.ac("click",(function(){r.pc(t);const c=r.nc(2),e=r.cc().$implicit,n=r.cc().$implicit;return r.cc(3).sendUpdate(n,e.key,c.value)})),r.xc(4,"send update"),r.Rb(),r.Rb()}if(2&t){const t=r.cc().$implicit;r.Cb(1),r.ic("value",t.value)}}function S(t,c){if(1&t&&r.xc(0),2&t){const t=r.cc().$implicit;r.zc(" ",t.value,"")}}function x(t,c){if(1&t&&(r.Sb(0,"div"),r.Sb(1,"p"),r.xc(2),r.Rb(),r.vc(3,k,5,1,"div",13),r.dc(4,"keyFree"),r.vc(5,S,1,1,"ng-template",null,14,r.wc),r.Nb(7,"br"),r.Rb()),2&t){const t=c.$implicit,e=r.nc(6);r.Cb(2),r.zc("",t.key,":"),r.Cb(1),r.ic("ngIf",r.ec(4,3,t.key))("ngIfElse",e)}}function y(t,c){if(1&t&&(r.Sb(0,"div"),r.Sb(1,"h3"),r.xc(2),r.Rb(),r.vc(3,x,8,5,"div",9),r.dc(4,"keyvalue"),r.Rb()),2&t){const t=c.$implicit;r.Cb(2),r.zc("name: ",t.name,""),r.Cb(1),r.ic("ngForOf",r.ec(4,2,t))}}function R(t,c){if(1&t&&(r.Sb(0,"div"),r.xc(1," test "),r.vc(2,y,5,4,"div",9),r.Rb()),2&t){const t=c.$implicit;r.Cb(2),r.ic("ngForOf",t)}}function C(t,c){if(1&t){const t=r.Tb();r.Sb(0,"div"),r.Sb(1,"h3"),r.xc(2),r.Rb(),r.Sb(3,"p"),r.xc(4),r.Rb(),r.Sb(5,"p"),r.xc(6),r.Rb(),r.Sb(7,"p"),r.xc(8),r.dc(9,"json"),r.Rb(),r.Nb(10,"br"),r.Nb(11,"input",3,4),r.Sb(13,"button",2),r.ac("click",(function(){r.pc(t);const e=c.$implicit,n=r.nc(12);return r.cc().test(e.name,"width",n.value)})),r.xc(14,"send update"),r.Rb(),r.Nb(15,"br"),r.Nb(16,"input",5,6),r.Sb(18,"button",2),r.ac("click",(function(){r.pc(t);const e=c.$implicit,n=r.nc(17);return r.cc().test(e.name,"height",n.value)})),r.xc(19,"send update"),r.Rb(),r.Nb(20,"br"),r.Nb(21,"input",7,8),r.Sb(23,"button",2),r.ac("click",(function(){r.pc(t);const e=c.$implicit,n=r.nc(22);return r.cc().test(e.name,"squeletons",n.value)})),r.xc(24,"send update"),r.Rb(),r.Nb(25,"br"),r.Sb(26,"button",2),r.ac("click",(function(){return r.pc(t),r.cc().pass()})),r.xc(27,"pass"),r.Rb(),r.Nb(28,"br"),r.Sb(29,"h3"),r.xc(30,"clans:"),r.Rb(),r.vc(31,g,8,3,"div",9),r.Nb(32,"br"),r.Sb(33,"div",10),r.Sb(34,"app-world-viewver",11,12),r.ac("moveRequest",(function(c){return r.pc(t),r.cc().move(c)}))("focusCase",(function(c){return r.pc(t),r.cc().focus(c)})),r.Rb(),r.Rb(),r.vc(36,R,3,1,"div",0),r.dc(37,"async"),r.Rb()}if(2&t){const t=c.$implicit,e=r.cc();r.Cb(2),r.yc(t.name),r.Cb(2),r.zc("width:",t.width,""),r.Cb(2),r.zc("height:",t.height,""),r.Cb(2),r.yc(r.ec(9,11,t)),r.Cb(3),r.ic("value",t.width),r.Cb(5),r.ic("value",t.height),r.Cb(5),r.ic("value",t.squeletons),r.Cb(10),r.ic("ngForOf",t.clans),r.Cb(3),r.ic("socket",e.socketService.socketObservable)("character",e.chara),r.Cb(2),r.ic("ngIf",r.ec(37,13,e.focusedCase))}}let O=(()=>{class t{constructor(t,c){this.adminService=t,this.socketService=c,this.worlds=new s.a,this.world=new o.a(null),this.chara=new o.a({position:{x:0,y:0}}),this.focusedCase=new o.a(null)}ngOnInit(){this.worlds.subscribe(t=>{this.worldsActual=t}),this.adminService.getWorlds().subscribe(t=>{this.worlds.next(t),this.world.next(t[0]),this.chara.next({position:{x:0,y:0}}),console.log("admin worlds",t)})}move(t){console.log("move",t);let c=this.chara.getValue();c.position.x+=t.x,c.position.y+=t.y,this.chara.next(c)}focus(t){console.log("focusing",t),this.focusedCase.next(t)}selectWorld(t){for(let c of this.worldsActual)if(c.name===t){this.world.next(c);break}}pass(){this.adminService.pass(this.world.getValue().name)}test(t,c,e){this.adminService.updateConstantValue(t,c,e,t=>{console.log("res",t)})}sendUpdate(t,c,e){console.log("send update",this.world.getValue(),t,c,e),this.adminService.updateWorldValue(this.world.getValue().name,t,c,e,t=>{console.log(this.viewver),console.log("res update",t),t&&this.viewver.updateObjs([t],t=>{})})}}return t.\u0275fac=function(c){return new(c||t)(r.Mb(a.a),r.Mb(d))},t.\u0275cmp=r.Gb({type:t,selectors:[["app-admin-world"]],viewQuery:function(t,c){var e;1&t&&r.Cc(h,!0),2&t&&r.mc(e=r.bc())&&(c.viewver=e.first)},decls:7,vars:6,consts:[[4,"ngIf"],[3,"click",4,"ngFor","ngForOf"],[3,"click"],["placeholder","width",3,"value"],["width",""],["placeholder","height",3,"value"],["height",""],["placeholder","squeletons",3,"value"],["squeletons",""],[4,"ngFor","ngForOf"],[1,"map"],[3,"socket","character","moveRequest","focusCase"],["viewver",""],[4,"ngIf","ngIfElse"],["justShow",""],[3,"value"],["input",""]],template:function(t,c){1&t&&(r.Sb(0,"h2"),r.xc(1,"Admin Worlds"),r.Rb(),r.vc(2,w,2,1,"div",0),r.dc(3,"async"),r.vc(4,C,38,15,"div",0),r.dc(5,"async"),r.Nb(6,"router-outlet")),2&t&&(r.Cb(2),r.ic("ngIf",r.ec(3,2,c.worlds)),r.Cb(2),r.ic("ngIf",r.ec(5,4,c.world)))},directives:[n.n,i.e,n.m,f.a],pipes:[n.b,n.g,n.h,v],styles:[".map[_ngcontent-%COMP%]{width:512px;height:256px}"]}),t})(),I=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(c){return new(c||t)},t.\u0275cmp=r.Gb({type:t,selectors:[["app-calculs"]],decls:2,vars:0,template:function(t,c){1&t&&(r.Sb(0,"p"),r.xc(1,"calculs works!"),r.Rb())},styles:[""]}),t})();function N(t,c){1&t&&(r.Sb(0,"div"),r.xc(1," test\n"),r.Rb())}let $=(()=>{class t{constructor(t){this.adminService=t,this.test=new o.a("bonjour")}ngOnInit(){}logOut(){this.adminService.logOut()}}return t.\u0275fac=function(c){return new(c||t)(r.Mb(a.a))},t.\u0275cmp=r.Gb({type:t,selectors:[["app-main"]],decls:13,vars:7,consts:[[3,"click"],[3,"routerLink"],[4,"ngIf"]],template:function(t,c){1&t&&(r.Sb(0,"button",0),r.ac("click",(function(){return c.logOut()})),r.xc(1,"logout"),r.Rb(),r.Sb(2,"button",1),r.xc(3,"users"),r.Rb(),r.Sb(4,"button",1),r.xc(5,"worlds"),r.Rb(),r.Sb(6,"button",1),r.xc(7,"patterns"),r.Rb(),r.Sb(8,"button",1),r.xc(9,"calculs"),r.Rb(),r.vc(10,N,2,0,"div",2),r.dc(11,"async"),r.Nb(12,"router-outlet")),2&t&&(r.Cb(2),r.ic("routerLink","users"),r.Cb(2),r.ic("routerLink","worlds"),r.Cb(2),r.ic("routerLink","patterns"),r.Cb(2),r.ic("routerLink","calculs"),r.Cb(2),r.ic("ngIf",r.ec(11,5,c.test)))},directives:[i.c,n.n,i.e],pipes:[n.b],styles:[""]}),t})(),F=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(c){return new(c||t)},t.\u0275cmp=r.Gb({type:t,selectors:[["app-patterns"]],decls:2,vars:0,template:function(t,c){1&t&&(r.Sb(0,"p"),r.xc(1,"patterns works!"),r.Rb())},styles:[""]}),t})();const z=i.d.forChild([{path:"",component:$,children:[{path:"users",component:(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(c){return new(c||t)},t.\u0275cmp=r.Gb({type:t,selectors:[["app-users"]],decls:2,vars:0,template:function(t,c){1&t&&(r.Sb(0,"p"),r.xc(1,"users works!"),r.Rb())},styles:[""]}),t})()},{path:"patterns",component:F},{path:"calculs",component:I},{path:"worlds",component:O}]}]);var q=e("ze14");let j=(()=>{class t{}return t.\u0275mod=r.Kb({type:t}),t.\u0275inj=r.Jb({factory:function(c){return new(c||t)},imports:[[n.c]]}),t})(),L=(()=>{class t{}return t.\u0275mod=r.Kb({type:t}),t.\u0275inj=r.Jb({factory:function(c){return new(c||t)},imports:[[n.c,z,q.a,j]]}),t})()}}]);