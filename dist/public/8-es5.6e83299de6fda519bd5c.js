function _classCallCheck(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(n,e){for(var t=0;t<e.length;t++){var o=e[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(n,o.key,o)}}function _createClass(n,e,t){return e&&_defineProperties(n.prototype,e),t&&_defineProperties(n,t),n}(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{"we/n":function(n,e,t){"use strict";t.r(e),t.d(e,"ConnectionModule",(function(){return q}));var o,i,a,r,c,s,u=t("ofXK"),l=t("3Pt+"),m=t("tyNb"),f=t("Wp6s"),p=t("kmnG"),b=t("qFsG"),d=t("Olzg"),g=t("R0Ic"),h=t("fXoL"),v=t("r479"),C=t("XiUz"),w=t("znSr"),y=t("tk/3"),k=t("hztc"),S=t("bTqV"),x=((o=function(){function n(){_classCallCheck(this,n)}return _createClass(n,[{key:"transform",value:function(n,e){var t=null;return n&&("signIn"===e?n.backend?t="probl\xe8me technique":!0===n.emailNotExist?t="email non reconnu":!0===n.email&&(t="email invalid"):"create"===e&&(n.backend?t="probl\xe8me technique":!0===n.emailExist?t="email d\xe9j\xe0 pris":!0===n.email?t="email invalid":!0===n.nameExist?t="pseudo d\xe9j\xe0 pris":!0===n.require&&(t="champ requis"))),t}}]),n}()).\u0275fac=function(n){return new(n||o)},o.\u0275pipe=h.Lb({name:"inputMail",type:o,pure:!0}),o),_=["loginRef"],M=((a=function(){function n(e,t,o){_classCallCheck(this,n),this.http=e,this.accountService=t,this.router=o}return _createClass(n,[{key:"ngOnInit",value:function(){this.formGroup=new l.d({email:new l.b("",[l.m.required,l.m.email],this.validateEmail.bind(this)),password:new l.b("",l.m.required)})}},{key:"validateEmail",value:function(n){var e=this;return new Promise((function(t,o){e.accountService.checkEmail(n.value).subscribe((function(n){t(n?null:{emailNotExist:!0})}),(function(n){t({backend:!0})}))}))}},{key:"login",value:function(){this.formGroup.valid&&this.accountService.signIn(this.formGroup.value).subscribe((function(n){}))}},{key:"prepareLoginButton",value:function(){this.auth2.attachClickHandler(this.loginElement.nativeElement,{},(function(n){var e=n.getBasicProfile();console.log("Token || "+n.getAuthResponse().id_token),console.log("ID: "+e.getId()),console.log("Name: "+e.getName()),console.log("Image URL: "+e.getImageUrl()),console.log("Email: "+e.getEmail())}),(function(n){}))}},{key:"googleSDK",value:function(){var n,e,t,o,i=this;window.googleSDKLoaded=function(){window.gapi.load("auth2",(function(){i.auth2=window.gapi.auth2.init({client_id:"212493728126-dr3lerpm5vnbbhqnavjqdfucd1ddbtef.apps.googleusercontent.com",scope:"profile email"}),i.prepareLoginButton()}))},e="google-jssdk",o=(n=document).getElementsByTagName("script")[0],n.getElementById(e)||((t=n.createElement("script")).id=e,t.src="https://apis.google.com/js/platform.js?onload=googleSDKLoaded",o.parentNode.insertBefore(t,o))}}]),n}()).\u0275fac=function(n){return new(n||a)(h.Mb(y.b),h.Mb(k.a),h.Mb(m.a))},a.\u0275cmp=h.Gb({type:a,selectors:[["app-signin"]],viewQuery:function(n,e){var t;1&n&&h.sc(_,!0),2&n&&h.lc(t=h.bc())&&(e.loginElement=t.first)},decls:17,vars:6,consts:[["fxFlex","100%"],["fxLayout","column nowrap"],["fxLayout","column nowrap","fxLayoutAlign","center start",3,"formGroup","ngSubmit"],["matInput","","type","text","formControlName","email","placeholder","email"],["type","password","matInput","","formControlName","password","placeholder","mot de passe"],["type","submitLogin","mat-raised-button","","color","accent",1,"buttonForm",3,"disabled"]],template:function(n,e){1&n&&(h.Sb(0,"mat-card",0),h.Sb(1,"mat-card-title"),h.Sb(2,"span"),h.wc(3,"Connexion"),h.Rb(),h.Rb(),h.Sb(4,"mat-card-content",1),h.Sb(5,"form",2),h.ac("ngSubmit",(function(){return e.login()})),h.Sb(6,"mat-form-field"),h.Nb(7,"input",3),h.Sb(8,"mat-error"),h.wc(9),h.dc(10,"inputMail"),h.Rb(),h.Rb(),h.Sb(11,"mat-form-field"),h.Nb(12,"input",4),h.Sb(13,"mat-error"),h.wc(14," mot de passe invalid"),h.Rb(),h.Rb(),h.Sb(15,"button",5),h.wc(16," jouer "),h.Rb(),h.Rb(),h.Rb(),h.Rb()),2&n&&(h.Cb(5),h.ic("formGroup",e.formGroup),h.Cb(4),h.xc(h.fc(10,3,e.formGroup.get("email").errors,"signIn")),h.Cb(6),h.ic("disabled",!e.formGroup.valid))},directives:[f.a,C.b,f.d,f.b,C.d,l.n,l.j,C.c,l.e,p.b,b.a,l.a,l.i,l.c,p.a,S.a],pipes:[x],styles:["mat-form-field[_ngcontent-%COMP%]{width:100%}.social-networks[_ngcontent-%COMP%]{margin:4px;padding:4px}.googleButton[_ngcontent-%COMP%]{background-image:url(/assets/images/signin_google.png)}.facebookButton[_ngcontent-%COMP%], .googleButton[_ngcontent-%COMP%]{width:180px;height:43px;background-size:contain}.facebookButton[_ngcontent-%COMP%]{background-image:url(/assets/images/signin_facebook.png)}"]}),a),G=((i=function(){function n(e,t,o){_classCallCheck(this,n),this.http=e,this.accountService=t,this.router=o}return _createClass(n,[{key:"ngOnInit",value:function(){this.formGroup=new l.d({name:new l.b("",l.m.required,this.validateName.bind(this)),email:new l.b("",[l.m.required,l.m.email],this.validateEmail.bind(this)),password:new l.b("",[l.m.required,this.matchingPassword.bind(this)]),confirm:new l.b("",[l.m.required,this.matchingConfirm.bind(this)])})}},{key:"validateName",value:function(n){var e=this;return new Promise((function(t,o){e.accountService.checkName(n.value).subscribe((function(n){t(n?{nameExist:!0}:null)}),(function(n){console.log(n),t({backend:!0})}))}))}},{key:"validateEmail",value:function(n){var e=this;return new Promise((function(t,o){e.accountService.checkEmail(n.value).subscribe((function(n){t(n?{emailExist:!0}:null)}),(function(n){t({backend:!0})}))}))}},{key:"matchingPassword",value:function(n){return this.formGroup&&this.formGroup.value.confirm!==n.value?{nomatch:!0}:(this.formGroup&&this.formGroup.controls.confirm.setErrors(null),null)}},{key:"matchingConfirm",value:function(n){return this.formGroup&&this.formGroup.value.password!==n.value?{nomatch:!0}:(this.formGroup&&this.formGroup.value&&this.formGroup.value.password&&this.formGroup.controls.password.setErrors(null),null)}},{key:"create",value:function(){this.accountService.signUp(this.formGroup.value).subscribe((function(n){n&&alert("un email de confirmation vous a \xe9t\xe9 envoy\xe9.\n Vous pourrez activer votre compte en cliquant sur le lien.")}))}}]),n}()).\u0275fac=function(n){return new(n||i)(h.Mb(y.b),h.Mb(k.a),h.Mb(m.a))},i.\u0275cmp=h.Gb({type:i,selectors:[["app-signup"]],decls:24,vars:10,consts:[["fxFlex","100%"],["fxLayout","column nowrap"],["fxLayout","column nowrap","fxLayoutAlign","center start",3,"formGroup","ngSubmit"],["type","text","matInput","","formControlName","name","placeholder","nom"],["type","text","matInput","","formControlName","email","placeholder","email"],["type","password","matInput","","formControlName","password","placeholder","Mot de passe"],["type","password","matInput","","formControlName","confirm","placeholder","Confirmer mot de passe"],["type","submitLogin","mat-raised-button","","color","accent",1,"buttonForm",3,"disabled"]],template:function(n,e){1&n&&(h.Sb(0,"mat-card",0),h.Sb(1,"mat-card-title"),h.Sb(2,"span"),h.wc(3,"Cr\xe9er un compte"),h.Rb(),h.Rb(),h.Sb(4,"mat-card-content",1),h.Sb(5,"form",2),h.ac("ngSubmit",(function(){return e.create()})),h.Sb(6,"mat-form-field"),h.Nb(7,"input",3),h.Sb(8,"mat-error"),h.wc(9),h.dc(10,"inputMail"),h.Rb(),h.Rb(),h.Sb(11,"mat-form-field"),h.Nb(12,"input",4),h.Sb(13,"mat-error"),h.wc(14),h.dc(15,"inputMail"),h.Rb(),h.Rb(),h.Sb(16,"mat-form-field"),h.Nb(17,"input",5),h.Rb(),h.Sb(18,"mat-form-field"),h.Nb(19,"input",6),h.Sb(20,"mat-error"),h.wc(21,"les mots de passe ne correspondent pas"),h.Rb(),h.Rb(),h.Sb(22,"button",7),h.wc(23,"cr\xe9er"),h.Rb(),h.Rb(),h.Rb(),h.Rb()),2&n&&(h.Cb(5),h.ic("formGroup",e.formGroup),h.Cb(4),h.xc(h.fc(10,4,e.formGroup.get("name").errors,"create")),h.Cb(5),h.xc(h.fc(15,7,e.formGroup.get("email").errors,"create")),h.Cb(8),h.ic("disabled",!e.formGroup.valid))},directives:[f.a,C.b,f.d,f.b,C.d,l.n,l.j,C.c,l.e,p.b,b.a,l.a,l.i,l.c,p.a,S.a],pipes:[x],styles:["mat-form-field[_ngcontent-%COMP%]{width:100%}"]}),i),O=["class","connection"],I=function(n,e){return{"connection-main-center":n,"connection-main-safe":e}},R=function(n,e){return{"connection-sm":!0,"height-center":n,"height-safe":e}},P=function(n,e){return{"connection-normal":!0,"height-center":n,"height-safe":e}},N=((r=function(){function n(e){_classCallCheck(this,n),this.animationService=e,this.introAnimation="start",this.animationService.background_state.next("wait")}return _createClass(n,[{key:"ngOnInit",value:function(){var n=this;setTimeout((function(){n.introAnimation="normal"}),10)}},{key:"heightIn",value:function(){return!!(document.getElementById("signContent")&&document.getElementById("signContent").offsetHeight<window.innerHeight)}}]),n}()).\u0275fac=function(n){return new(n||r)(h.Mb(v.a))},r.\u0275cmp=h.Gb({type:r,selectors:[["app-account",8,"connection"]],attrs:O,decls:5,vars:14,consts:[["fxLayoutAlign","center start",1,"connection-main",2,"height","100%",3,"ngClass"],["id","signContent","fxLayout","column nowrap","fxFlex.lt-sm","100%","fxFlex.gt-xs","400px",3,"ngClass.lt-sm","ngClass.gt-xs"],[1,"signin"],[1,"signout"]],template:function(n,e){1&n&&(h.Sb(0,"div",0),h.Sb(1,"div",1),h.Nb(2,"app-signin",2),h.Nb(3,"p"),h.Nb(4,"app-signup",3),h.Rb(),h.Rb()),2&n&&(h.ic("ngClass",h.kc(5,I,e.heightIn(),!e.heightIn())),h.Cb(1),h.ic("ngClass.lt-sm",h.kc(8,R,e.heightIn(),!e.heightIn()))("ngClass.gt-xs",h.kc(11,P,e.heightIn(),!e.heightIn())),h.Cb(1),h.ic("@intro",e.introAnimation),h.Cb(2),h.ic("@intro",e.introAnimation))},directives:[C.c,u.i,w.a,C.d,C.b,M,G],styles:[".page[_ngcontent-%COMP%]{height:100%}.accountConnection[_ngcontent-%COMP%]{display:flex;flex-flow:column nowrap;justify-content:center;align-items:center}.signin[_ngcontent-%COMP%]{opacity:0}.signin[_ngcontent-%COMP%], .signout[_ngcontent-%COMP%]{width:100%}.connection-main-center[_ngcontent-%COMP%]{overflow:hidden}.connection-default[_ngcontent-%COMP%], .connection-sm[_ngcontent-%COMP%]{padding:10px}.height-center[_ngcontent-%COMP%]{align-self:center}.height-safe[_ngcontent-%COMP%]{align-self:normal}"],data:{animation:[Object(g.m)("intro",[Object(g.j)("start",Object(g.k)({opacity:0,transform:"scale(0.9,0.9)"})),Object(g.j)("normal",Object(g.k)({opacity:1,transform:"scale(1.0,1.0)"})),Object(g.l)("* => normal",Object(g.e)("1000ms 0ms ease-out"))])]}}),r),E=t("lJxs"),j=m.c.forChild([{path:"u",component:N,canActivate:[(c=function(){function n(e,t){_classCallCheck(this,n),this.router=e,this.accountService=t}return _createClass(n,[{key:"canActivate",value:function(n,e){var t=this;return this.accountService.getAccount().pipe(Object(E.a)((function(n){return!n||(t.router.navigate(["u"]),!1)})))}}]),n}(),c.\u0275fac=function(n){return new(n||c)(h.Wb(m.a),h.Wb(k.a))},c.\u0275prov=h.Ib({token:c,factory:c.\u0275fac,providedIn:"root"}),c)]},{path:"confirmer",component:d.a},{path:"*",redirectTo:"u",pathMatch:"full"},{path:"**",redirectTo:"u",pathMatch:"full"}]),L=t("NFeN"),q=((s=function n(){_classCallCheck(this,n)}).\u0275mod=h.Kb({type:s}),s.\u0275inj=h.Jb({factory:function(n){return new(n||s)},providers:[],imports:[[u.c,l.l,l.f,m.c,f.c,p.d,b.b,j,C.f,S.b,L.b,w.c]]}),s)}}]);