function _classCallCheck(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(n,t){for(var e=0;e<t.length;e++){var o=t[e];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(n,o.key,o)}}function _createClass(n,t,e){return t&&_defineProperties(n.prototype,t),e&&_defineProperties(n,e),n}(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{jkDv:function(n,t,e){"use strict";e.r(t),e.d(t,"AdminModule",(function(){return v}));var o,i,a,c,r=e("ofXK"),s=e("tyNb"),u=e("fXoL"),l=e("q6HN"),d=((o=function(){function n(t,e){_classCallCheck(this,n),this.adminService=t,this.router=e,this.test="bonjour"}return _createClass(n,[{key:"ngOnInit",value:function(){}},{key:"connect",value:function(n,t){console.log("connect",n,t),this.adminService.login(n,t,(function(n){n||alert("Vos identifiants ne sont pas correct.")}))}}]),n}()).\u0275fac=function(n){return new(n||o)(u.Mb(l.a),u.Mb(s.b))},o.\u0275cmp=u.Gb({type:o,selectors:[["app-admin"]],decls:8,vars:0,consts:[["type","text","placeholder","admin"],["admin",""],["type","password","placeholder","mot de passe"],["password",""],[3,"click"]],template:function(n,t){if(1&n){var e=u.Tb();u.Sb(0,"form"),u.Nb(1,"input",0,1),u.Nb(3,"input",2,3),u.Rb(),u.Sb(5,"button",4),u.ac("click",(function(){u.pc(e);var n=u.nc(2),o=u.nc(4);return t.connect(n.value,o.value)})),u.xc(6,"ok"),u.Rb(),u.Nb(7,"router-outlet")}},directives:[s.e],styles:[""]}),o),f=e("lJxs"),p=((i=function(){function n(t,e){_classCallCheck(this,n),this.adminService=t,this.router=e}return _createClass(n,[{key:"canActivate",value:function(n,t){var e=this;return this.adminService.getAdmin().pipe(Object(f.a)((function(t){return console.log("ACCOUNT READ IN ADMIN",t),t?(n.url[0].path=t.admin,!0):(e.router.navigate(["/admin/login"]),!0)})))}}]),n}()).\u0275fac=function(n){return new(n||i)(u.Wb(l.a),u.Wb(s.b))},i.\u0275prov=u.Ib({token:i,factory:i.\u0275fac,providedIn:"root"}),i),h=s.d.forChild([{path:"login",component:d,canActivate:[(a=function(){function n(t,e){_classCallCheck(this,n),this.adminService=t,this.router=e}return _createClass(n,[{key:"canActivate",value:function(n,t){var e=this;return this.adminService.getAdmin().pipe(Object(f.a)((function(n){return console.log("ACCOUNT READ IN ADMIN",n),!n||(e.router.navigate(["/admin/main"]),!0)})))}}]),n}(),a.\u0275fac=function(n){return new(n||a)(u.Wb(l.a),u.Wb(s.b))},a.\u0275prov=u.Ib({token:a,factory:a.\u0275fac,providedIn:"root"}),a)]},{path:":admin",canActivate:[p],loadChildren:function(){return Promise.all([e.e(1),e.e(8)]).then(e.bind(null,"X2qB")).then((function(n){return n.MainModule}))}},{path:"**",redirectTo:"login",pathMatch:"full"}]),v=((c=function n(){_classCallCheck(this,n)}).\u0275mod=u.Kb({type:c}),c.\u0275inj=u.Jb({factory:function(n){return new(n||c)},imports:[[r.c,h]]}),c)},q6HN:function(n,t,e){"use strict";e.d(t,"a",(function(){return u}));var o=e("jtHE"),i=e("AytR"),a=e("fXoL"),c=e("tk/3"),r=e("hrsj"),s=e("tyNb"),u=function(){var n=function(){function n(t,e,a){var c=this;_classCallCheck(this,n),this.http=t,this.tokenService=e,this.router=a,this.admin=new o.a,this.actualAdmin=null,this.admin.subscribe((function(n){c.actualAdmin=n})),console.log("look for admin token",this.tokenService.getToken()),this.tokenService.getToken()?this.http.post("".concat(i.a.apiURL,"/admin/readToken"),{token:this.tokenService.getToken()}).subscribe((function(n){console.log("adminRes",n),c.admin.next(n)})):this.admin.next(null)}return _createClass(n,[{key:"login",value:function(n,t,e){var o=this;this.http.post("".concat(i.a.apiURL,"/admin/login"),{user:n,password:t}).subscribe((function(n){console.log(n),n&&n.token?(o.tokenService.setToken(n.token),o.router.navigate(["/admin/main"]),document.location.reload(),e(!0)):e(!1)}),(function(n){console.log(n),e(!1)}))}},{key:"logOut",value:function(){this.tokenService.removeToken(),localStorage.removeItem("token"),this.admin.next(null),this.router.navigate(["/admin/login"]),document.location.reload()}},{key:"getAdmin",value:function(){return this.admin}},{key:"getWorlds",value:function(){return this.http.get("".concat(i.a.apiURL,"/admin/getWorlds"))}},{key:"pass",value:function(n){this.http.get("".concat(i.a.apiURL,"/admin/pass?world=").concat(n)).subscribe((function(n){console.log("pass done",n)}))}},{key:"updateWorldValue",value:function(n,t,e,o,a){console.log("update world value",o),this.http.post("".concat(i.a.apiURL,"/admin/updateWorldValue"),{worldName:n,target:t,key:e,value:o}).subscribe((function(n){a(n)}),(function(n){console.log("err",n)}))}},{key:"updateConstantValue",value:function(n,t,e,o){console.log("update world constant",e),this.http.post("".concat(i.a.apiURL,"/admin/updateWorldConstantValue"),{worldName:n,key:t,value:e}).subscribe((function(n){o(n)}),(function(n){console.log("err",n)}))}}]),n}();return n.\u0275fac=function(t){return new(t||n)(a.Wb(c.b),a.Wb(r.a),a.Wb(s.b))},n.\u0275prov=a.Ib({token:n,factory:n.\u0275fac,providedIn:"root"}),n}()}}]);