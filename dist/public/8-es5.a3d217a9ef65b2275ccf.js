function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{"we/n":function(e,t,n){"use strict";n.r(t),n.d(t,"ConnectionModule",(function(){return N}));var o,i,a,r,c,s,l=n("ofXK"),u=n("3Pt+"),m=n("tyNb"),f=n("Wp6s"),b=n("kmnG"),p=n("qFsG"),g=n("R0Ic"),d=n("IYfF"),h=n("fXoL"),v=n("r479"),w=n("XiUz"),C=n("znSr"),y=n("AytR"),P=n("tk/3"),k=n("bTqV"),x=((o=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"transform",value:function(e,t){var n=null;return e&&("signIn"===t?e.backend?n="probl\xe8me technique":!0===e.emailNotExist?n="email non reconnu":!0===e.email&&(n="email invalid"):"create"===t&&(e.backend?n="probl\xe8me technique":!0===e.emailExist?n="email d\xe9j\xe0 pris":!0===e.email?n="email invalid":!0===e.nameExist?n="pseudo d\xe9j\xe0 pris":!0===e.require&&(n="champ requis"))),n}}]),e}()).\u0275fac=function(e){return new(e||o)},o.\u0275pipe=h.Kb({name:"inputMail",type:o,pure:!0}),o),_=["loginRef"],I=((a=function(){function e(t,n,o){_classCallCheck(this,e),this.http=t,this.userService=n,this.router=o}return _createClass(e,[{key:"ngOnInit",value:function(){this.formGroup=new u.d({email:new u.b("",[u.m.required,u.m.email],this.validateEmail.bind(this)),password:new u.b("",u.m.required)})}},{key:"validateEmail",value:function(e){var t=this;return console.log("".concat(y.a.apiURL,"/checkEmail?email=").concat(e.value)),new Promise((function(n,o){t.http.get("".concat(y.a.apiURL,"/checkEmail?email=").concat(e.value)).subscribe((function(e){n(e?null:{emailNotExist:!0})}),(function(e){n({backend:!0})}))}))}},{key:"login",value:function(){var e=this;this.formGroup.valid&&this.userService.signIn(this.formGroup.value).subscribe((function(t){e.router.navigate(["u"])}))}},{key:"prepareLoginButton",value:function(){this.auth2.attachClickHandler(this.loginElement.nativeElement,{},(function(e){var t=e.getBasicProfile();console.log("Token || "+e.getAuthResponse().id_token),console.log("ID: "+t.getId()),console.log("Name: "+t.getName()),console.log("Image URL: "+t.getImageUrl()),console.log("Email: "+t.getEmail())}),(function(e){console.log(JSON.stringify(e,void 0,2))}))}},{key:"googleSDK",value:function(){var e,t,n,o,i=this;window.googleSDKLoaded=function(){window.gapi.load("auth2",(function(){i.auth2=window.gapi.auth2.init({client_id:"212493728126-dr3lerpm5vnbbhqnavjqdfucd1ddbtef.apps.googleusercontent.com",scope:"profile email"}),i.prepareLoginButton()}))},t="google-jssdk",o=(e=document).getElementsByTagName("script")[0],e.getElementById(t)||((n=e.createElement("script")).id=t,n.src="https://apis.google.com/js/platform.js?onload=googleSDKLoaded",o.parentNode.insertBefore(n,o))}}]),e}()).\u0275fac=function(e){return new(e||a)(h.Lb(P.b),h.Lb(d.a),h.Lb(m.a))},a.\u0275cmp=h.Fb({type:a,selectors:[["app-signin"]],viewQuery:function(e,t){var n;1&e&&h.pc(_,!0),2&e&&h.ic(n=h.Zb())&&(t.loginElement=n.first)},decls:22,vars:6,consts:[["fxFlex","100%"],["fxLayout","column nowrap"],["fxLayout","column nowrap","fxLayoutAlign","center start",3,"formGroup","ngSubmit"],["matInput","","type","text","formControlName","email","placeholder","email"],["type","password","matInput","","formControlName","password","placeholder","mot de passe"],["type","submitLogin","mat-raised-button","","color","accent",1,"buttonForm",3,"disabled"],["fxFlex","100%","fxLayout","row nowrap","fxLayoutAlign","center center",1,"social-networks"],["mat-button","","type","button","mb-fab","",1,"googleButton"],["loginRef",""],["mat-button","","type","button","mb-fab","",1,"facebookButton"]],template:function(e,t){1&e&&(h.Qb(0,"mat-card",0),h.Qb(1,"mat-card-title"),h.Qb(2,"span"),h.sc(3,"Connexion"),h.Pb(),h.Pb(),h.Qb(4,"mat-card-content",1),h.Qb(5,"form",2),h.Yb("ngSubmit",(function(){return t.login()})),h.Qb(6,"mat-form-field"),h.Mb(7,"input",3),h.Qb(8,"mat-error"),h.sc(9),h.bc(10,"inputMail"),h.Pb(),h.Pb(),h.Qb(11,"mat-form-field"),h.Mb(12,"input",4),h.Qb(13,"mat-error"),h.sc(14," mot de passe invalid"),h.Pb(),h.Pb(),h.Qb(15,"button",5),h.sc(16,"jouer"),h.Pb(),h.Pb(),h.Qb(17,"div",6),h.Mb(18,"button",7,8),h.Mb(20,"button",9,8),h.Pb(),h.Pb(),h.Pb()),2&e&&(h.Bb(5),h.gc("formGroup",t.formGroup),h.Bb(4),h.tc(h.dc(10,3,t.formGroup.get("email").errors,"signIn")),h.Bb(6),h.gc("disabled",!t.formGroup.valid))},directives:[f.a,w.b,f.d,f.b,w.d,u.n,u.j,w.c,u.e,b.b,p.a,u.a,u.i,u.c,b.a,k.b],pipes:[x],styles:["mat-form-field[_ngcontent-%COMP%]{width:100%}.social-networks[_ngcontent-%COMP%]{margin:4px;padding:4px}.googleButton[_ngcontent-%COMP%]{background-image:url(/assets/images/signin_google.png)}.facebookButton[_ngcontent-%COMP%], .googleButton[_ngcontent-%COMP%]{width:180px;height:43px;background-size:contain}.facebookButton[_ngcontent-%COMP%]{background-image:url(/assets/images/signin_facebook.png)}"]}),a),L=((i=function(){function e(t,n,o){_classCallCheck(this,e),this.http=t,this.authService=n,this.router=o}return _createClass(e,[{key:"ngOnInit",value:function(){this.formGroup=new u.d({name:new u.b("",u.m.required,this.validateName.bind(this)),email:new u.b("",[u.m.required,u.m.email],this.validateEmail.bind(this)),password:new u.b("",[u.m.required,this.matchingPassword.bind(this)]),confirm:new u.b("",[u.m.required,this.matchingConfirm.bind(this)])})}},{key:"validateName",value:function(e){var t=this;return new Promise((function(n,o){t.http.get("".concat(y.a.apiURL,"/checkAccountName?name=").concat(e.value)).subscribe((function(e){n(e?{nameExist:!0}:null)}),(function(e){n({backend:!0})}))}))}},{key:"validateEmail",value:function(e){var t=this;return new Promise((function(n,o){t.http.get("".concat(y.a.apiURL,"/checkEmail?email=").concat(e.value)).subscribe((function(e){n(e?{emailExist:!0}:null)}),(function(e){n({backend:!0})}))}))}},{key:"matchingPassword",value:function(e){return this.formGroup&&this.formGroup.value.confirm!==e.value?{nomatch:!0}:(this.formGroup&&this.formGroup.controls.confirm.setErrors(null),null)}},{key:"matchingConfirm",value:function(e){return this.formGroup&&this.formGroup.value.password!==e.value?{nomatch:!0}:(this.formGroup&&this.formGroup.value&&this.formGroup.value.password&&this.formGroup.controls.password.setErrors(null),null)}},{key:"create",value:function(){var e=this;this.authService.signUp(this.formGroup.value).subscribe((function(t){t&&e.authService.signIn(t).subscribe((function(t){e.router.navigate(["u","bienvenue"])}))}))}}]),e}()).\u0275fac=function(e){return new(e||i)(h.Lb(P.b),h.Lb(d.a),h.Lb(m.a))},i.\u0275cmp=h.Fb({type:i,selectors:[["app-signup"]],decls:24,vars:10,consts:[["fxFlex","100%"],["fxLayout","column nowrap"],["fxLayout","column nowrap","fxLayoutAlign","center start",3,"formGroup","ngSubmit"],["type","text","matInput","","formControlName","name","placeholder","nom"],["type","text","matInput","","formControlName","email","placeholder","email"],["type","password","matInput","","formControlName","password","placeholder","Mot de passe"],["type","password","matInput","","formControlName","confirm","placeholder","Confirmer mot de passe"],["type","submitLogin","mat-raised-button","","color","accent",1,"buttonForm",3,"disabled"]],template:function(e,t){1&e&&(h.Qb(0,"mat-card",0),h.Qb(1,"mat-card-title"),h.Qb(2,"span"),h.sc(3,"Cr\xe9er un compte"),h.Pb(),h.Pb(),h.Qb(4,"mat-card-content",1),h.Qb(5,"form",2),h.Yb("ngSubmit",(function(){return t.create()})),h.Qb(6,"mat-form-field"),h.Mb(7,"input",3),h.Qb(8,"mat-error"),h.sc(9),h.bc(10,"inputMail"),h.Pb(),h.Pb(),h.Qb(11,"mat-form-field"),h.Mb(12,"input",4),h.Qb(13,"mat-error"),h.sc(14),h.bc(15,"inputMail"),h.Pb(),h.Pb(),h.Qb(16,"mat-form-field"),h.Mb(17,"input",5),h.Pb(),h.Qb(18,"mat-form-field"),h.Mb(19,"input",6),h.Qb(20,"mat-error"),h.sc(21,"les mots de passe ne correspondent pas"),h.Pb(),h.Pb(),h.Qb(22,"button",7),h.sc(23,"cr\xe9er"),h.Pb(),h.Pb(),h.Pb(),h.Pb()),2&e&&(h.Bb(5),h.gc("formGroup",t.formGroup),h.Bb(4),h.tc(h.dc(10,4,t.formGroup.get("name").errors,"create")),h.Bb(5),h.tc(h.dc(15,7,t.formGroup.get("email").errors,"create")),h.Bb(8),h.gc("disabled",!t.formGroup.valid))},directives:[f.a,w.b,f.d,f.b,w.d,u.n,u.j,w.c,u.e,b.b,p.a,u.a,u.i,u.c,b.a,k.b],pipes:[x],styles:["mat-form-field[_ngcontent-%COMP%]{width:100%}"]}),i),M=["class","connection"],G=function(e,t){return{"connection-main-center":e,"connection-main-safe":t}},O=function(e,t){return{"connection-sm":!0,"height-center":e,"height-safe":t}},Q=function(e,t){return{"connection-normal":!0,"height-center":e,"height-safe":t}},E=m.d.forChild([{path:"",component:(c=function(){function e(t){_classCallCheck(this,e),this.animationService=t,localStorage.removeItem(d.a.LOCAL_JWT),this.animationService.background_state.next("wait")}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"heightIn",value:function(){return!!(document.getElementById("signContent")&&document.getElementById("signContent").offsetHeight<window.innerHeight)}}]),e}(),c.\u0275fac=function(e){return new(e||c)(h.Lb(v.a))},c.\u0275cmp=h.Fb({type:c,selectors:[["app-account",8,"connection"]],attrs:M,decls:5,vars:14,consts:[["fxLayoutAlign","center start",1,"connection-main",2,"height","100%",3,"ngClass"],["id","signContent","fxLayout","column nowrap","fxFlex.lt-sm","100%","fxFlex.gt-xs","400px",3,"ngClass.lt-sm","ngClass.gt-xs"],[1,"signin"],[1,"signout"]],template:function(e,t){1&e&&(h.Qb(0,"div",0),h.Qb(1,"div",1),h.Mb(2,"app-signin",2),h.Mb(3,"p"),h.Mb(4,"app-signup",3),h.Pb(),h.Pb()),2&e&&(h.gc("ngClass",h.hc(5,G,t.heightIn(),!t.heightIn())),h.Bb(1),h.gc("ngClass.lt-sm",h.hc(8,O,t.heightIn(),!t.heightIn()))("ngClass.gt-xs",h.hc(11,Q,t.heightIn(),!t.heightIn())),h.Bb(1),h.gc("@intro","normal"),h.Bb(2),h.gc("@intro","normal"))},directives:[w.c,l.i,C.a,w.d,w.b,I,L],styles:[".page[_ngcontent-%COMP%]{height:100%}.accountConnection[_ngcontent-%COMP%]{display:flex;flex-flow:column nowrap;justify-content:center;align-items:center}.signin[_ngcontent-%COMP%], .signout[_ngcontent-%COMP%]{opacity:0;width:100%;transform:scale(.9)}.connection-main-center[_ngcontent-%COMP%]{overflow:hidden}.connection-default[_ngcontent-%COMP%], .connection-sm[_ngcontent-%COMP%]{padding:10px}.height-center[_ngcontent-%COMP%]{align-self:center}.height-safe[_ngcontent-%COMP%]{align-self:normal}"],data:{animation:[Object(g.m)("intro",[Object(g.j)("normal",Object(g.k)({opacity:1,transform:"scale(1)"})),Object(g.l)("* => normal",Object(g.e)("1000ms 0ms ease-out"))])]}}),c),canActivate:[(r=function(){function e(t){_classCallCheck(this,e),this.router=t}return _createClass(e,[{key:"canActivate",value:function(e,t){return!localStorage.getItem(d.a.LOCAL_JWT)||(this.router.navigate(["u"]),!1)}}]),e}(),r.\u0275fac=function(e){return new(e||r)(h.Ub(m.a))},r.\u0275prov=h.Hb({token:r,factory:r.\u0275fac,providedIn:"root"}),r)]}]),B=n("NFeN"),N=((s=function e(){_classCallCheck(this,e)}).\u0275mod=h.Jb({type:s}),s.\u0275inj=h.Ib({factory:function(e){return new(e||s)},providers:[],imports:[[l.c,u.l,u.f,m.d,f.c,b.d,p.b,E,w.f,k.c,B.b,C.c]]}),s)}}]);