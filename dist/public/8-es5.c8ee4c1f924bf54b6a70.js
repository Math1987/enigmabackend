function _createForOfIteratorHelper(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=_unsupportedIterableToArray(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c,i,r=!0,o=!1;return{s:function(){c=e[Symbol.iterator]()},n:function(){var e=c.next();return r=e.done,e},e:function(e){o=!0,i=e},f:function(){try{r||null==c.return||c.return()}finally{if(o)throw i}}}}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,c=new Array(t);n<t;n++)c[n]=e[n];return c}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var c=t[n];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(e,c.key,c)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{X2qB:function(e,t,n){"use strict";n.r(t),n.d(t,"MainModule",(function(){return K}));var c,i,r=n("ofXK"),o=n("tyNb"),a=n("jtHE"),s=n("2Vo4"),u=n("fXoL"),l=n("q6HN"),b=n("AytR"),f=n("gFX4"),p=n("hrsj"),v=n("tk/3"),d=((c=function e(t,n,c){var i=this;_classCallCheck(this,e),this.tokenService=t,this.adminService=n,this.http=c,this.socket=null,this.socketObservable=new s.a(null),this.adminService.getAdmin().subscribe((function(e){console.log("admin for socket",e,t.token),e&&(i.socket=f.connect("".concat(b.a.backURL),{query:{token:t.token,worldName:"world1"}}),i.socketObservable.next(i.socket))}))}).\u0275fac=function(e){return new(e||c)(u.Wb(p.a),u.Wb(l.a),u.Wb(v.b))},c.\u0275prov=u.Ib({token:c,factory:c.\u0275fac,providedIn:"root"}),c),h=n("5RKK"),m=((i=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"transform",value:function(e){return"key"===e||"x"===e||"y"===e||"key_"===e||"id"===e?null:e}}]),e}()).\u0275fac=function(e){return new(e||i)},i.\u0275pipe=u.Lb({name:"keyFree",type:i,pure:!0}),i),y=["viewver"];function k(e,t){if(1&e){var n=u.Tb();u.Sb(0,"button",2),u.ac("click",(function(){u.pc(n);var e=t.$implicit;return u.cc(2).selectWorld(e)})),u.xc(1),u.Rb()}if(2&e){var c=t.$implicit;u.Cb(1),u.zc(" ",c.name," ")}}function w(e,t){if(1&e&&(u.Sb(0,"div"),u.vc(1,k,2,1,"button",1),u.Rb()),2&e){var n=t.$implicit;u.Cb(1),u.ic("ngForOf",n)}}function C(e,t){if(1&e&&(u.Sb(0,"div"),u.Nb(1,"br"),u.Sb(2,"p"),u.xc(3),u.Rb(),u.Sb(4,"p"),u.xc(5),u.Rb(),u.Sb(6,"p"),u.xc(7),u.Rb(),u.Rb()),2&e){var n=t.$implicit;u.Cb(3),u.zc("key: ",n.key_,""),u.Cb(2),u.zc("color : ",n.color,""),u.Cb(2),u.zc("img : ",n.img,"")}}function g(e,t){if(1&e){var n=u.Tb();u.Sb(0,"div"),u.Nb(1,"input",15,16),u.Sb(3,"button",2),u.ac("click",(function(){u.pc(n);var e=u.nc(2),t=u.cc().$implicit,c=u.cc().$implicit;return u.cc(3).sendUpdate(c,t.key,e.value)})),u.xc(4,"send update"),u.Rb(),u.Rb()}if(2&e){var c=u.cc().$implicit;u.Cb(1),u.ic("value",c.value)}}function S(e,t){if(1&e&&u.xc(0),2&e){var n=u.cc().$implicit;u.zc(" ",n.value,"")}}function x(e,t){if(1&e&&(u.Sb(0,"div"),u.Sb(1,"p"),u.xc(2),u.Rb(),u.vc(3,g,5,1,"div",13),u.dc(4,"keyFree"),u.vc(5,S,1,1,"ng-template",null,14,u.wc),u.Nb(7,"br"),u.Rb()),2&e){var n=t.$implicit,c=u.nc(6);u.Cb(2),u.zc("",n.key,":"),u.Cb(1),u.ic("ngIf",u.ec(4,3,n.key))("ngIfElse",c)}}function R(e,t){if(1&e&&(u.Sb(0,"div"),u.Sb(1,"h3"),u.xc(2),u.Rb(),u.vc(3,x,8,5,"div",9),u.dc(4,"keyvalue"),u.Rb()),2&e){var n=t.$implicit;u.Cb(2),u.zc("name: ",n.name,""),u.Cb(1),u.ic("ngForOf",u.ec(4,2,n))}}function _(e,t){if(1&e&&(u.Sb(0,"div"),u.xc(1," test "),u.vc(2,R,5,4,"div",9),u.Rb()),2&e){var n=t.$implicit;u.Cb(2),u.ic("ngForOf",n)}}function I(e,t){if(1&e){var n=u.Tb();u.Sb(0,"div"),u.Sb(1,"h3"),u.xc(2),u.Rb(),u.Sb(3,"p"),u.xc(4),u.Rb(),u.Sb(5,"p"),u.xc(6),u.Rb(),u.Sb(7,"p"),u.xc(8),u.dc(9,"json"),u.Rb(),u.Nb(10,"br"),u.Nb(11,"input",3,4),u.Sb(13,"button",2),u.ac("click",(function(){u.pc(n);var e=t.$implicit,c=u.nc(12);return u.cc().test(e.name,"width",c.value)})),u.xc(14,"send update"),u.Rb(),u.Nb(15,"br"),u.Nb(16,"input",5,6),u.Sb(18,"button",2),u.ac("click",(function(){u.pc(n);var e=t.$implicit,c=u.nc(17);return u.cc().test(e.name,"height",c.value)})),u.xc(19,"send update"),u.Rb(),u.Nb(20,"br"),u.Nb(21,"input",7,8),u.Sb(23,"button",2),u.ac("click",(function(){u.pc(n);var e=t.$implicit,c=u.nc(22);return u.cc().test(e.name,"squeletons",c.value)})),u.xc(24,"send update"),u.Rb(),u.Nb(25,"br"),u.Sb(26,"button",2),u.ac("click",(function(){return u.pc(n),u.cc().pass()})),u.xc(27,"pass"),u.Rb(),u.Nb(28,"br"),u.Sb(29,"h3"),u.xc(30,"clans:"),u.Rb(),u.vc(31,C,8,3,"div",9),u.Nb(32,"br"),u.Sb(33,"div",10),u.Sb(34,"app-world-viewver",11,12),u.ac("moveRequest",(function(e){return u.pc(n),u.cc().move(e)}))("focusCase",(function(e){return u.pc(n),u.cc().focus(e)})),u.Rb(),u.Rb(),u.vc(36,_,3,1,"div",0),u.dc(37,"async"),u.Rb()}if(2&e){var c=t.$implicit,i=u.cc();u.Cb(2),u.yc(c.name),u.Cb(2),u.zc("width:",c.width,""),u.Cb(2),u.zc("height:",c.height,""),u.Cb(2),u.yc(u.ec(9,11,c)),u.Cb(3),u.ic("value",c.width),u.Cb(5),u.ic("value",c.height),u.Cb(5),u.ic("value",c.squeletons),u.Cb(10),u.ic("ngForOf",c.clans),u.Cb(3),u.ic("socket",i.socketService.socketObservable)("character",i.chara),u.Cb(2),u.ic("ngIf",u.ec(37,13,i.focusedCase))}}var O,N,A=((N=function(){function e(t,n){_classCallCheck(this,e),this.adminService=t,this.socketService=n,this.worlds=new a.a,this.world=new s.a(null),this.chara=new s.a({position:{x:0,y:0}}),this.focusedCase=new s.a(null)}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.worlds.subscribe((function(t){e.worldsActual=t})),this.adminService.getWorlds().subscribe((function(t){e.worlds.next(t),e.world.next(t[0]),e.chara.next({position:{x:0,y:0}}),console.log("admin worlds",t)}))}},{key:"move",value:function(e){console.log("move",e);var t=this.chara.getValue();t.position.x+=e.x,t.position.y+=e.y,this.chara.next(t)}},{key:"focus",value:function(e){console.log("focusing",e),this.focusedCase.next(e)}},{key:"selectWorld",value:function(e){var t,n=_createForOfIteratorHelper(this.worldsActual);try{for(n.s();!(t=n.n()).done;){var c=t.value;if(c.name===e){this.world.next(c);break}}}catch(i){n.e(i)}finally{n.f()}}},{key:"pass",value:function(){this.adminService.pass(this.world.getValue().name)}},{key:"test",value:function(e,t,n){this.adminService.updateConstantValue(e,t,n,(function(e){console.log("res",e)}))}},{key:"sendUpdate",value:function(e,t,n){var c=this;console.log("send update",this.world.getValue(),e,t,n),this.adminService.updateWorldValue(this.world.getValue().name,e,t,n,(function(e){console.log(c.viewver),console.log("res update",e),e&&c.viewver.updateObjs([e],(function(e){}))}))}}]),e}()).\u0275fac=function(e){return new(e||N)(u.Mb(l.a),u.Mb(d))},N.\u0275cmp=u.Gb({type:N,selectors:[["app-admin-world"]],viewQuery:function(e,t){var n;1&e&&u.Cc(y,!0),2&e&&u.mc(n=u.bc())&&(t.viewver=n.first)},decls:7,vars:6,consts:[[4,"ngIf"],[3,"click",4,"ngFor","ngForOf"],[3,"click"],["placeholder","width",3,"value"],["width",""],["placeholder","height",3,"value"],["height",""],["placeholder","squeletons",3,"value"],["squeletons",""],[4,"ngFor","ngForOf"],[1,"map"],[3,"socket","character","moveRequest","focusCase"],["viewver",""],[4,"ngIf","ngIfElse"],["justShow",""],[3,"value"],["input",""]],template:function(e,t){1&e&&(u.Sb(0,"h2"),u.xc(1,"Admin Worlds"),u.Rb(),u.vc(2,w,2,1,"div",0),u.dc(3,"async"),u.vc(4,I,38,15,"div",0),u.dc(5,"async"),u.Nb(6,"router-outlet")),2&e&&(u.Cb(2),u.ic("ngIf",u.ec(3,2,t.worlds)),u.Cb(2),u.ic("ngIf",u.ec(5,4,t.world)))},directives:[r.n,o.e,r.m,h.a],pipes:[r.b,r.g,r.h,m],styles:[".map[_ngcontent-%COMP%]{width:512px;height:256px}"]}),N),$=((O=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"ngOnInit",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||O)},O.\u0275cmp=u.Gb({type:O,selectors:[["app-calculs"]],decls:2,vars:0,template:function(e,t){1&e&&(u.Sb(0,"p"),u.xc(1,"calculs works!"),u.Rb())},styles:[""]}),O);function F(e,t){1&e&&(u.Sb(0,"div"),u.xc(1," test\n"),u.Rb())}var j,L,z,T,q,W=((L=function(){function e(t){_classCallCheck(this,e),this.adminService=t,this.test=new s.a("bonjour")}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"logOut",value:function(){this.adminService.logOut()}}]),e}()).\u0275fac=function(e){return new(e||L)(u.Mb(l.a))},L.\u0275cmp=u.Gb({type:L,selectors:[["app-main"]],decls:13,vars:7,consts:[[3,"click"],[3,"routerLink"],[4,"ngIf"]],template:function(e,t){1&e&&(u.Sb(0,"button",0),u.ac("click",(function(){return t.logOut()})),u.xc(1,"logout"),u.Rb(),u.Sb(2,"button",1),u.xc(3,"users"),u.Rb(),u.Sb(4,"button",1),u.xc(5,"worlds"),u.Rb(),u.Sb(6,"button",1),u.xc(7,"patterns"),u.Rb(),u.Sb(8,"button",1),u.xc(9,"calculs"),u.Rb(),u.vc(10,F,2,0,"div",2),u.dc(11,"async"),u.Nb(12,"router-outlet")),2&e&&(u.Cb(2),u.ic("routerLink","users"),u.Cb(2),u.ic("routerLink","worlds"),u.Cb(2),u.ic("routerLink","patterns"),u.Cb(2),u.ic("routerLink","calculs"),u.Cb(2),u.ic("ngIf",u.ec(11,5,t.test)))},directives:[o.c,r.n,o.e],pipes:[r.b],styles:[""]}),L),M=((j=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"ngOnInit",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||j)},j.\u0275cmp=u.Gb({type:j,selectors:[["app-patterns"]],decls:2,vars:0,template:function(e,t){1&e&&(u.Sb(0,"p"),u.xc(1,"patterns works!"),u.Rb())},styles:[""]}),j),V=o.d.forChild([{path:"",component:W,children:[{path:"users",component:(z=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"ngOnInit",value:function(){}}]),e}(),z.\u0275fac=function(e){return new(e||z)},z.\u0275cmp=u.Gb({type:z,selectors:[["app-users"]],decls:2,vars:0,template:function(e,t){1&e&&(u.Sb(0,"p"),u.xc(1,"users works!"),u.Rb())},styles:[""]}),z)},{path:"patterns",component:M},{path:"calculs",component:$},{path:"worlds",component:A}]}]),E=n("ze14"),G=((q=function e(){_classCallCheck(this,e)}).\u0275mod=u.Kb({type:q}),q.\u0275inj=u.Jb({factory:function(e){return new(e||q)},imports:[[r.c]]}),q),K=((T=function e(){_classCallCheck(this,e)}).\u0275mod=u.Kb({type:T}),T.\u0275inj=u.Jb({factory:function(e){return new(e||T)},imports:[[r.c,V,E.a,G]]}),T)}}]);